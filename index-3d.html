<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#1A202C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tech Empire">
    <meta name="screen-orientation" content="portrait">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ุงูุฅูุจุฑุงุทูุฑูุฉ ุงูุชูููุฉ - Tech Empire 3D</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Silkscreen&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/3d-game.css">
    <link rel="stylesheet" href="styles/chat-translation-styles.css">
    <link rel="stylesheet" href="styles/license-styles.css">
    <link rel="stylesheet" href="styles/ai-chat.css">
    <link rel="stylesheet" href="styles/kingdom-lands.css">
    <link rel="stylesheet" href="styles/city-gates-defense.css">
</head>
<body>
    <!-- ุดุฑูุท ุงูุฅุนูุงูุงุช ูุงูุฃุฎุจุงุฑ ุงููุชุญุฑู -->
    <div class="ticker-container" id="ticker-container">
        <div class="ticker-content" id="ticker-content">
            <div class="ticker-item">
                <span class="ticker-icon">๐</span>
                <span class="ticker-text">ุฃููุงู ูุณููุงู ุจูู ูู ุฅูุจุฑุงุทูุฑูุฉ ุงูุชูููููุฌูุง! ุงุจุฏุฃ ุฑุญูุชู ูุญู ุงูุชุทููุฑ ูุงูุจูุงุก.</span>
            </div>
        </div>
    </div>
    
    <div class="game-container">
        <!-- ุดุฑูุท ุงูููุงุฑุฏ ูุงูููุงุช ุงูุนููู -->
        <header class="top-bar">
            <!-- ุงูุตู ุงูุฃูู: ุงูููุงุฑุฏ -->
            <div class="top-bar-row">
                <div class="resources-bar">
                    <div class="resource-item" data-resource="gold">
                        <div class="resource-icon gold-icon"></div>
                        <span class="resource-value" id="gold-amount">2500</span>
                    </div>
                    <div class="resource-item" data-resource="food">
                        <div class="resource-icon food-icon"></div>
                        <span class="resource-value" id="food-amount">1500</span>
                    </div>
                    <div class="resource-item" data-resource="wood">
                        <div class="resource-icon wood-icon"></div>
                        <span class="resource-value" id="wood-amount">800</span>
                    </div>
                    <div class="resource-item" data-resource="stone">
                        <div class="resource-icon stone-icon"></div>
                        <span class="resource-value" id="stone-amount">600</span>
                    </div>
                    <div class="resource-item" data-resource="iron">
                        <div class="resource-icon iron-icon"></div>
                        <span class="resource-value" id="iron-amount">200</span>
                    </div>
                    <div class="resource-item" data-resource="intelligence">
                        <div class="resource-icon intelligence-icon">๐ก</div>
                        <span class="resource-value" id="intelligence-amount">0</span>
                    </div>
                </div>
                
                <div class="vip-section">
                    <div class="vip-icon" id="vip-icon"></div>
                    <span class="vip-level" id="vip-level">VIP ุฃุณุงุณู</span>
                </div>
                
                <!-- ุฃุฒุฑุงุฑ ุญููู ุงููุฎุจุฉ ูุงูุญุฑุจ ูุงููุธุงู -->
                <div class="elite-systems-section">
                    <button class="elite-btn" onclick="game.createEliteFieldsInterface()" title="ุญููู ุงููุฎุจุฉ">
                        ๐ ุญููู ุงููุฎุจุฉ
                    </button>
                    <button class="elite-btn" onclick="game.createTradeShipInterface()" title="ุงูุณูููุฉ ุงูุชุฌุงุฑูุฉ">
                        ๐ข ุงูุณูููุฉ ุงูุชุฌุงุฑูุฉ
                    </button>
                    <button class="elite-btn" onclick="game.createInvestmentCenterInterface()" title="ูุฑูุฒ ุงูุงุณุชุซูุงุฑ">
                        ๐ฐ ูุฑูุฒ ุงูุงุณุชุซูุงุฑ
                    </button>
                    <button class="elite-btn new-feature" onclick="game.createAdvancedStoresInterface()" title="ุงููุชุงุฌุฑ ุงููุชูุฏูุฉ">
                        ๐ ุงููุชุงุฌุฑ ุงููุชูุฏูุฉ
                    </button>
                    <button class="elite-btn new-feature" onclick="game.createBlackMarketInterface()" title="ุงูุณูู ุงููุธูู ุงูุณุฑูุฉ">
                        ๐ด๏ธ ุงูุณูู ุงููุธูู
                    </button>
                </div>
            </div>
            
            <!-- ุงูุตู ุงูุซุงูู: ุงูููุงุช -->
            <div class="top-bar-row">
                <div class="troops-bar">
                    <div class="troop-item" data-troop="infantry">
                        <div class="troop-icon infantry-icon">๐ฅ</div>
                        <span class="troop-value" id="infantry-count">150</span>
                    </div>
                    <div class="troop-item" data-troop="archers">
                        <div class="troop-icon archers-icon">๐น</div>
                        <span class="troop-value" id="archers-count">80</span>
                    </div>
                    <div class="troop-item" data-troop="cavalry">
                        <div class="troop-icon cavalry-icon">๐</div>
                        <span class="troop-value" id="cavalry-count">40</span>
                    </div>
                    <div class="troop-item" data-troop="ranged">
                        <div class="troop-icon ranged-icon">โ๏ธ</div>
                        <span class="troop-value" id="ranged-count">60</span>
                    </div>
                    <div class="troop-item" data-troop="heavy">
                        <div class="troop-icon heavy-icon">๐ก๏ธ</div>
                        <span class="troop-value" id="heavy-count">25</span>
                    </div>
                </div>
                
                <div class="population-info">
                    <span>ุงูุณูุงู: </span>
                    <span id="population-count">500</span>
                </div>
            </div>
            
            <!-- ุงูุตู ุงูุซุงูุซ: ูุนูููุงุช ุงูููุช ูุงูุชุฑุฎูุต -->
            <div class="top-bar-row">
                <div class="game-info">
                    <div class="time-display">
                        <span>๐ </span>
                        <span id="game-time">12:00</span>
                    </div>
                </div>
                
                <div class="license-status-bar" id="license-info">
                    <span class="license-type">๐ ุงููุนุจุฉ ุงููุฌุงููุฉ</span>
                    <span class="time-remaining">โฐ 30 ุฏูููุฉ</span>
                </div>
            </div>
            
            <div class="game-info">
                <div class="time-display">
                    <span>ุงูููุช: </span>
                    <span id="game-time">ุงูููุช: 12:00</span>
                </div>
                <div class="gmt-time-display">
                    <span id="gmt-time-display">๐ 12:00:00 GMT</span>
                </div>
                <div class="population-display">
                    <span>ุงูุณูุงู: </span>
                    <span id="population-count">500</span>
                </div>
            </div>
            
            <div class="vip-section">
                <div class="vip-icon" id="vip-icon"></div>
                <span class="vip-level" id="vip-level">VIP ุฃุณุงุณู</span>
            </div>

            <!-- ูุนูููุงุช ุงูุชุฑุฎูุต -->
            <div class="license-status-bar" id="license-info">
                <span class="license-type">ุงููุนุจุฉ ุงููุฌุงููุฉ</span>
                <span class="time-remaining">ุงูููุช ุงููุชุจูู: 30 ุฏูููุฉ</span>
            </div>

            <!-- ุฒุฑ ุงููุชุฌุฑ - ุงูุนุฑุถ ุงูุชุฑููุฌู -->
            <button class="store-btn" onclick="game.openStore()" id="store-button">
                ๐ ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุงููุฌุงููุฉ - 6 ุดููุฑ!
            </button>

            <!-- ููุญุฉ ุชุญูู ุงูุฑุงุฏุงุฑ ุงูุณุฑูุนุฉ -->
            <div class="radar-mini-display" id="radar-mini-display">
                <div class="radar-icon" id="radar-status-icon">๐ก</div>
                <div class="radar-info">
                    <div class="radar-status">ุงูุฑุงุฏุงุฑ: ูุดุท</div>
                    <div class="radar-alerts-count">ุฅูุฐุงุฑุงุช: 0</div>
                </div>
                <div class="radar-controls-mini">
                    <button onclick="game.toggleFlashMode()" class="mini-btn" title="ุชุดุบูู/ุฅููุงู ุงูููุถ">โก</button>
                    <button onclick="game.dismissAllAlerts()" class="mini-btn" title="ุฅุทูุงุก ุฌููุน ุงูุฅูุฐุงุฑุงุช">๐ซ</button>
                </div>
            </div>
        </header>

        <!-- ุงูููุทูุฉ ุงูุฑุฆูุณูุฉ - ูุดูุฏ ุซูุงุซู ุงูุฃุจุนุงุฏ -->
        <main class="main-content">
            <div class="game-area">
                <!-- ุงููุดูุฏ ุซูุงุซู ุงูุฃุจุนุงุฏ -->
                <div class="scene-container" id="3d-container">
                    <div class="loading-screen" id="loading-screen">
                        <div class="loading-content">
                            <h2>ุฌุงุฑู ุชุญููู ุงูุฅูุจุฑุงุทูุฑูุฉ ุงูุชูููุฉ...</h2>
                            <div class="loading-bar">
                                <div class="loading-progress" id="loading-progress"></div>
                            </div>
                            <div class="loading-text" id="loading-text">0%</div>
                        </div>
                    </div>
                </div>

                <!-- ุฃุฒุฑุงุฑ ุงูุชุญูู ุจุงููููุฑุง -->
                <div class="camera-controls">
                    <button class="camera-btn" id="btn-top-view" title="ููุธุฑ ุนููู">โ</button>
                    <button class="camera-btn" id="btn-front-view" title="ููุธุฑ ุฃูุงูู">โ</button>
                    <button class="camera-btn" id="btn-3d-view" title="ููุธุฑ ุซูุงุซู ุงูุฃุจุนุงุฏ">3D</button>
                    <button class="camera-btn" id="btn-back-view" title="ููุธุฑ ุฎููู">โ</button>
                    <button class="camera-btn" id="btn-zoom-in" title="ุชูุจูุฑ">+</button>
                    <button class="camera-btn" id="btn-zoom-out" title="ุชุตุบูุฑ">-</button>
                </div>

                <!-- ููุญุฉ ุฃุฏูุงุช ุงููุจุงูู -->
                <div class="building-palette">
                    <div class="palette-title">ุฃุฏูุงุช ุงูุจูุงุก</div>
                    <div class="building-items">
                        <div class="building-item" data-building="villa">
                            <div class="building-icon villa-icon"></div>
                            <span>ูููุง</span>
                            <div class="building-cost">500๐ฐ 300๐ 200๐ชต</div>
                        </div>
                        <div class="building-item" data-building="columns">
                            <div class="building-icon columns-icon"></div>
                            <span>ุงูุฃุนูุฏุฉ</span>
                            <div class="building-cost">300๐ฐ 200๐ฟ</div>
                        </div>
                        <div class="building-item" data-building="theater">
                            <div class="building-icon theater-icon"></div>
                            <span>ุงููุณุฑุญ</span>
                            <div class="building-cost">800๐ฐ 400๐ฟ 200๐ชต</div>
                        </div>
                        <div class="building-item" data-building="colosseum">
                            <div class="building-icon colosseum-icon"></div>
                            <span>ุงูููููุณููู</span>
                            <div class="building-cost">2000๐ฐ 1000๐ฟ 200๐ฉ</div>
                        </div>
                        <div class="building-item" data-building="barracks">
                            <div class="building-icon barracks-icon"></div>
                            <span>ุงูุซููุงุช</span>
                            <div class="building-cost">600๐ฐ 300๐ชต 100๐ฉ</div>
                        </div>
                        <div class="building-item" data-building="market">
                            <div class="building-icon market-icon"></div>
                            <span>ุงูุณูู</span>
                            <div class="building-cost">1000๐ฐ 500๐ชต 200๐ฟ</div>
                        </div>
                        <div class="building-item" data-building="temple">
                            <div class="building-icon temple-icon"></div>
                            <span>ุงููุนุจุฏ</span>
                            <div class="building-cost">1500๐ฐ 800๐ฟ 300๐ชต</div>
                        </div>
                        <div class="building-item" data-building="forum">
                            <div class="building-icon forum-icon"></div>
                            <span>ุงูููุชุฏู</span>
                            <div class="building-cost">1200๐ฐ 600๐ฟ 400๐ชต</div>
                        </div>
                        <div class="building-item" data-building="royal_palace">
                            <div class="building-icon royal-palace-icon"></div>
                            <span>ุงููุตุฑ ุงููููู</span>
                            <div class="building-cost">3000๐ฐ 1500๐ฟ 1000๐ชต 500๐ฉ</div>
                        </div>
                    </div>
                </div>
                
                <!-- ูุณู ุงูุชุญุงููุงุช -->
                <div class="content-section" id="alliances-section" style="display: none;">
                    <div class="alliances-content">
                        <h2>ุงูุชุญุงููุงุช ุงูุณูุงุณูุฉ</h2>
                        <p>ุฃุทูู ุงูุนูุงู ูููุฉ ุงูููููุฉ ูู ุฎูุงู ุงูุชุญุงููุงุช ูุน ุงูููุงูู ุงูุฃุฎุฑู</p>
                        
                        <!-- ุงูุชุญุงููุงุช ุงููุดุทุฉ -->
                        <div class="active-alliances-section">
                            <h3>ุงูุชุญุงููุงุช ุงููุดุทุฉ</h3>
                            <div class="alliances-summary">
                                <div class="alliance-bonus-card">
                                    <h4>ููุงูุฃุฉ ุงูุชุญุงูู</h4>
                                    <div class="bonus-details">
                                        <span>ููุฉ ุฅุถุงููุฉ: <span id="total-alliance-bonus">0</span></span>
                                        <span>ุฐูุจ ุฅุถุงูู: <span id="extra-gold-bonus">0</span></span>
                                        <span>ุทุนุงู ุฅุถุงูู: <span id="extra-food-bonus">0</span></span>
                                    </div>
                                </div>
                            </div>
                            <div id="active-alliances-list" class="active-alliances-list">
                                <div class="no-alliances">ูุง ุชูุฌุฏ ุชุญุงููุงุช ูุดุทุฉ</div>
                            </div>
                        </div>
                        
                        <!-- ุงูุชุญุงููุงุช ุงููุชุงุญุฉ -->
                        <div class="available-alliances-section">
                            <h3>ุงูุชุญุงููุงุช ุงููุชุงุญุฉ</h3>
                            <div id="available-alliances-list" class="available-alliances-list">
                                <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                            </div>
                        </div>
                        
                        <!-- ูุนูููุงุช ุงูุชุญุงูู -->
                        <div class="alliance-info-section">
                            <h3>ูุนูููุงุช ุงูุชุญุงูู</h3>
                            <div class="info-cards">
                                <div class="info-card">
                                    <h4>ููุงุฆุฏ ุงูุชุญุงูู</h4>
                                    <ul>
                                        <li>ุฒูุงุฏุฉ ูู ููุฉ ุงููุนุฑูุฉ</li>
                                        <li>ููุงูุขุช ุฐูุจูุฉ ุฅุถุงููุฉ</li>
                                        <li>ุฅูุชุงุฌ ุทุนุงู ูุญุณู</li>
                                        <li>ููุงุฆุฏ ุญุตููุฉ ูู ุงูุฏูุงุน</li>
                                    </ul>
                                </div>
                                <div class="info-card">
                                    <h4>ููุงุนุฏ ุงูุชุญุงูู</h4>
                                    <ul>
                                        <li>ูููู ุชูุนูู ุชุญุงูููู ููุท ูู ููุณ ุงูููุช</li>
                                        <li>ูุฏุฉ ุงูุชุญุงูู: 5 ุฏูุงุฆู</li>
                                        <li>ูุง ูููู ุฅุนุงุฏุฉ ุชูุนูู ููุณ ุงูุชุญุงูู ููุฑุงู</li>
                                        <li>ุงูุชุญุงูู ูุนุทู ุฃูุถููุฉ ูู ะฒะพะนัะบะฐ ุงูุทูุงุจ</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ุชูููููุฌูุง ุงูุชุญุงูู -->
                        <div class="alliance-tech-section">
                            <h3>ุชูููููุฌูุง ุงูุชุญุงูู</h3>
                            <div class="tech-grid">
                                <div class="tech-card">
                                    <h4>ุชูููููุฌูุง ุงูุฐูุจ</h4>
                                    <p>ูุณุชูู: <span id="tech-gold-level">0</span></p>
                                    <button class="btn btn-small" onclick="game.researchAllianceTech('gold')">ุชุทููุฑ (500 ุฐูุจ)</button>
                                </div>
                                <div class="tech-card">
                                    <h4>ุชูููููุฌูุง ุงูุทุนุงู</h4>
                                    <p>ูุณุชูู: <span id="tech-food-level">0</span></p>
                                    <button class="btn btn-small" onclick="game.researchAllianceTech('food')">ุชุทููุฑ (500 ุฐูุจ)</button>
                                </div>
                                <div class="tech-card">
                                    <h4>ุงูุชูููููุฌูุง ุงูุนุณูุฑูุฉ</h4>
                                    <p>ูุณุชูู: <span id="tech-military-level">0</span></p>
                                    <button class="btn btn-small" onclick="game.researchAllianceTech('military')">ุชุทููุฑ (800 ุฐูุจ)</button>
                                </div>
                                <div class="tech-card">
                                    <h4>ุชูููููุฌูุง ุงูุจูุงุก</h4>
                                    <p>ูุณุชูู: <span id="tech-construction-level">0</span></p>
                                    <button class="btn btn-small" onclick="game.researchAllianceTech('construction')">ุชุทููุฑ (600 ุฐูุจ)</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ูุฏุงูุง ุงูุชุญุงูู -->
                        <div class="alliance-gifts-section">
                            <h3>ูุฏุงูุง ุงูุชุญุงูู</h3>
                            <div class="gift-status">
                                <p>ุงููุฏุงูุง ุงููุณุชุฎุฏูุฉ ุงูููู: <span id="gifts-used-today">0</span>/3</p>
                                <button class="btn btn-small" onclick="game.collectAllianceGift()" id="collect-gift-btn">ุฌูุน ุงููุฏูุฉ</button>
                            </div>
                        </div>
                        
                        <!-- ุฃุญุฏุงุซ ุงูุชุญุงูู -->
                        <div class="alliance-events-section">
                            <h3>ุฃุญุฏุงุซ ุงูุชุญุงูู</h3>
                            <div class="events-grid">
                                <div class="event-card">
                                    <h4>ุฏูุงุน ุนู ุงูุฅูููู</h4>
                                    <p>ุงูุญุฏุซ ุงูุฃุณุจูุนู ููุฏูุงุน ุนู ุฃุฑุงุถู ุงูุชุญุงูู</p>
                                    <span class="event-reward">ููุงูุฃุฉ: 1000 ุฐูุจ</span>
                                    <button class="btn btn-small" onclick="game.joinAllianceEvent('territoryDefense')">ุงูุถูุงู</button>
                                </div>
                                <div class="event-card">
                                    <h4>ูุบุงูุฑุงุช ุงููุฎุจุฉ</h4>
                                    <p>ูุบุงูุฑุงุช ูุซูุฑุฉ ูุน ุฃุนุถุงุก ุงูุชุญุงูู</p>
                                    <span class="event-reward">ููุงูุฃุฉ: 800 ุฐูุจ</span>
                                    <button class="btn btn-small" onclick="game.joinAllianceEvent('eliteAdventures')">ุงูุถูุงู</button>
                                </div>
                                <div class="event-card">
                                    <h4>ุญุฑูุจ ุงููุฎุจุฉ</h4>
                                    <p>ูุนุงุฑู ุชุญุงูููุฉ ุถุฏ ุฃุนุฏุงุก ูุดุชุฑููู</p>
                                    <span class="event-reward">ููุงูุฃุฉ: 1200 ุฐูุจ</span>
                                    <button class="btn btn-small" onclick="game.joinAllianceEvent('eliteWars')">ุงูุถูุงู</button>
                                </div>
                                <div class="event-card">
                                    <h4>ูุญุงููุฉ ุงููุญูุด</h4>
                                    <p>ุญุฏุซ ูููู ููุฒููุฉ ูุญูุด ูููุฉ</p>
                                    <span class="event-reward">ููุงูุฃุฉ: 300 ุฐูุจ</span>
                                    <button class="btn btn-small" onclick="game.joinAllianceEvent('fiendTrial')">ุงูุถูุงู</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ูุณุงุนุฏุฉ ุฃุนุถุงุก ุงูุชุญุงูู -->
                        <div class="alliance-help-section">
                            <h3>ูุณุงุนุฏุฉ ุฃุนุถุงุก ุงูุชุญุงูู</h3>
                            <div class="help-controls">
                                <button class="btn btn-small" onclick="game.helpAllianceMember('gold')">ูุณุงุนุฏุฉ ูู ุงูุฐูุจ</button>
                                <button class="btn btn-small" onclick="game.helpAllianceMember('food')">ูุณุงุนุฏุฉ ูู ุงูุทุนุงู</button>
                                <button class="btn btn-small" onclick="game.helpAllianceMember('construction')">ูุณุงุนุฏุฉ ูู ุงูุจูุงุก</button>
                                <button class="btn btn-small" onclick="game.helpAllianceMember('military')">ูุณุงุนุฏุฉ ุนุณูุฑูุฉ</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ูุณู ุงูุฌูุด -->
                <div class="content-section" id="military-section" style="display: none;">
                    <div class="military-content">
                        <h2>ุงูุฌูุด ุงูุฑููุงูู</h2>
                        <p>ุฃุฏูุฑ ุชุดูููุงุชู ุงูุนุณูุฑูุฉ ูุงุฌูุน ุงูููุฉ ูู ุฎูุงู ุงูุชุฏุฑูุจ ุงูุงุณุชุฑุงุชูุฌู</p>
                        
                        <!-- ูุนูููุงุช ุงูููุฉ -->
                        <div class="military-power-section">
                            <div class="power-display">
                                <div class="power-card">
                                    <h3>ููุฉ ุงููุนุฑูุฉ</h3>
                                    <span class="power-value" id="military-power-value">0</span>
                                    <div class="power-breakdown">
                                        <span>ุงููุณุชูู: <span id="kingdom-level-display">1</span></span>
                                        <span>ุงูุชุดูููุฉ: <span id="current-formation-display">ุชุณุชูุฏู</span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ุงููุญุฏุงุช ุงูุนุณูุฑูุฉ -->
                        <div class="military-units-section">
                            <h3>ุงููุญุฏุงุช ุงูุนุณูุฑูุฉ</h3>
                            <div class="units-grid">
                                <!-- ุงูุทููุณ (Legionaries) -->
                                <div class="unit-card">
                                    <div class="unit-icon">โ๏ธ</div>
                                    <h4>ุงูุทููุณ</h4>
                                    <p>ุงููุดุงุฉ ุงูุซูููุฉ ุงูุฃุณุงุณูุฉ</p>
                                    <div class="unit-stats">
                                        <span>ุงูุนุฏุฏ: <span id="legiones-count">0</span>/200</span>
                                        <span>ุงูููุฉ: +25</span>
                                    </div>
                                    <div class="unit-actions">
                                        <button class="btn btn-small" onclick="game.trainUnit('legiones')">ุชุฏุฑูุจ (50 ุฐูุจ)</button>
                                        <button class="btn btn-small btn-secondary" onclick="game.dismissUnit('legiones')">ุชูููู</button>
                                    </div>
                                </div>
                                
                                <!-- ุงููุฑุณุงู (Cavalry) -->
                                <div class="unit-card">
                                    <div class="unit-icon">๐</div>
                                    <h4>ุงููุฑุณุงู</h4>
                                    <p>ูุญุฏุฉ ุฎูุงูุฉ ูููููู</p>
                                    <div class="unit-stats">
                                        <span>ุงูุนุฏุฏ: <span id="equites-count">0</span>/100</span>
                                        <span>ุงูููุฉ: +30</span>
                                    </div>
                                    <div class="unit-actions">
                                        <button class="btn btn-small" onclick="game.trainUnit('equites')">ุชุฏุฑูุจ (80 ุฐูุจ)</button>
                                        <button class="btn btn-small btn-secondary" onclick="game.dismissUnit('equites')">ุชูููู</button>
                                    </div>
                                </div>
                                
                                <!-- ุงูุฑูุงุฉ (Archers) -->
                                <div class="unit-card">
                                    <div class="unit-icon">๐น</div>
                                    <h4>ุงูุฑูุงุฉ</h4>
                                    <p>ุงูููุงุชููู ุจุงูุฎูุซ</p>
                                    <div class="unit-stats">
                                        <span>ุงูุนุฏุฏ: <span id="sagittarii-count">0</span>/150</span>
                                        <span>ุงูููุฉ: +20</span>
                                    </div>
                                    <div class="unit-actions">
                                        <button class="btn btn-small" onclick="game.trainUnit('sagittarii')">ุชุฏุฑูุจ (40 ุฐูุจ)</button>
                                        <button class="btn btn-small btn-secondary" onclick="game.dismissUnit('sagittarii')">ุชูููู</button>
                                    </div>
                                </div>
                                
                                <!-- ุงูุฎููููู (Light Infantry) -->
                                <div class="unit-card">
                                    <div class="unit-icon">๐ก๏ธ</div>
                                    <h4>ุงูุฎููููู</h4>
                                    <p>ูุดุงุฉ ุฎููููู ููุชุฌุณุณ</p>
                                    <div class="unit-stats">
                                        <span>ุงูุนุฏุฏ: <span id="velites-count">0</span>/120</span>
                                        <span>ุงูููุฉ: +15</span>
                                    </div>
                                    <div class="unit-actions">
                                        <button class="btn btn-small" onclick="game.trainUnit('velites')">ุชุฏุฑูุจ (30 ุฐูุจ)</button>
                                        <button class="btn btn-small btn-secondary" onclick="game.dismissUnit('velites')">ุชูููู</button>
                                    </div>
                                </div>
                                
                                <!-- ูุฏุงูุน ุงูุฌุฑุงุฑุงุช (Artillery) -->
                                <div class="unit-card">
                                    <div class="unit-icon">๐๏ธ</div>
                                    <h4>ูุฏุงูุน ุงูุฌุฑุงุฑุงุช</h4>
                                    <p>ูุดุบูู ุฃุณูุญุฉ ุงูุญุตุงุฑ</p>
                                    <div class="unit-stats">
                                        <span>ุงูุนุฏุฏ: <span id="ballistarii-count">0</span>/50</span>
                                        <span>ุงูููุฉ: +50</span>
                                    </div>
                                    <div class="unit-actions">
                                        <button class="btn btn-small" onclick="game.trainUnit('ballistarii')">ุชุฏุฑูุจ (100 ุฐูุจ)</button>
                                        <button class="btn btn-small btn-secondary" onclick="game.dismissUnit('ballistarii')">ุชูููู</button>
                                    </div>
                                </div>
                                
                                <!-- ุงููุณุงุนุฏูู (Auxiliary) -->
                                <div class="unit-card">
                                    <div class="unit-icon">๐ก๏ธ</div>
                                    <h4>ุงููุณุงุนุฏูู</h4>
                                    <p>ุฌููุฏ ูู ุงูุฃุฑุงุถู ุงููุฏููุนุฉ</p>
                                    <div class="unit-stats">
                                        <span>ุงูุนุฏุฏ: <span id="auxilia-count">0</span>/80</span>
                                        <span>ุงูููุฉ: +35</span>
                                    </div>
                                    <div class="unit-actions">
                                        <button class="btn btn-small" onclick="game.trainUnit('auxilia')">ุชุฏุฑูุจ (60 ุฐูุจ)</button>
                                        <button class="btn btn-small btn-secondary" onclick="game.dismissUnit('auxilia')">ุชูููู</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ุงูุชุดูููุงุช ุงูุนุณูุฑูุฉ -->
                        <div class="military-formations-section">
                            <h3>ุงูุชุดูููุงุช ุงูุนุณูุฑูุฉ</h3>
                            <div class="formations-grid">
                                <div class="formation-card" onclick="game.changeFormation('testudo')">
                                    <h4>ุชุณุชูุฏู (ุงูุณูุญูุงุฉ)</h4>
                                    <p>ุชุดูููุฉ ุฏูุงุนูุฉ ูููุฉ</p>
                                    <span class="formation-bonus">+25 ุฏูุงุน</span>
                                </div>
                                <div class="formation-card" onclick="game.changeFormation('wedges')">
                                    <h4>ุงููุชุฏ</h4>
                                    <p>ุชุดูููุฉ ูุฌูููุฉ ููุงุฎุชุฑุงู</p>
                                    <span class="formation-bonus">+30 ูุฌูู</span>
                                </div>
                                <div class="formation-card" onclick="game.changeFormation('circle')">
                                    <h4>ุงูุฏุงุฆุฑุฉ</h4>
                                    <p>ุชุดูููุฉ ุฏุงุฆุฑูุฉ ูุชูุงุฒูุฉ</p>
                                    <span class="formation-bonus">+20 ูุชูุณุทุฉ</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ูุธุงู ุงููุนุงุฑู -->
                        <div class="battle-system-section">
                            <h3>ูุธุงู ุงููุนุงุฑู</h3>
                            <div class="battle-controls">
                                <div class="battle-type-cards">
                                    <div class="battle-card">
                                        <h4>ูุฌูู ูููุฑุฏ</h4>
                                        <p>ุฌูุด ูุงุญุฏ ููุงุฌู</p>
                                        <span class="risk-level">ูุฎุงุทุฑ: ูุชูุณุท</span>
                                        <button class="btn btn-small" onclick="game.startBattle('solo')">ุจุฏุก</button>
                                    </div>
                                    <div class="battle-card">
                                        <h4>ุชุฌูุน ุชุญุงููู</h4>
                                        <p>ุฌูุด ุชุญุงููู ููุญุฏ</p>
                                        <span class="risk-level">ูุฎุงุทุฑ: ููุฎูุถ</span>
                                        <button class="btn btn-small" onclick="game.coordinateAllianceAttack()">ุชูุณูู</button>
                                    </div>
                                    <div class="battle-card">
                                        <h4>ูุฌูู ููุณู</h4>
                                        <p>ูุฌูุงุช ูุชุฒุงููุฉ</p>
                                        <span class="risk-level">ูุฎุงุทุฑ: ุนุงูู</span>
                                        <button class="btn btn-small" onclick="game.initiateTimedAttack()">ุชูููุฐ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ุงููุธุงู ุงูุตุญู -->
                        <div class="hospital-section">
                            <h3>ุงููุธุงู ุงูุตุญู</h3>
                            <div class="hospital-status">
                                <div class="wounded-display">
                                    <span>ุงููุญุฏุงุช ุงููุตุงุจุฉ: <span id="wounded-units">0</span></span>
                                    <span>ุงูุณุนุฉ: <span id="hospital-capacity">20</span></span>
                                </div>
                                <button class="btn btn-small" onclick="game.healUnits()">ุนูุงุฌ ุงููุญุฏุงุช</button>
                            </div>
                        </div>
                        
                        <!-- ูุนูููุงุช ุงูุชุฏุฑูุจ -->
                        <div class="training-info-section">
                            <h3>ูุนูููุงุช ุงูุชุฏุฑูุจ</h3>
                            <div class="info-cards">
                                <div class="info-card">
                                    <h4>ุฃููุงุน ุงููุญุฏุงุช</h4>
                                    <ul>
                                        <li><strong>ุงูุทููุณ:</strong> ุงูุนููุฏ ุงูููุฑู ููุฌูุด ุงูุฑููุงูู</li>
                                        <li><strong>ุงููุฑุณุงู:</strong> ูููููู ูุงูุงุฎุชุฑุงู ุงูุณุฑูุน</li>
                                        <li><strong>ุงูุฑูุงุฉ:</strong> ููุฏุนู ูู ูุณุงูุฉ ุจุนูุฏุฉ</li>
                                        <li><strong>ุงูุฎููููู:</strong> ููููุงู ุงูุฎุงุตุฉ ูุงูุชุฌุณุณ</li>
                                    </ul>
                                </div>
                                <div class="info-card">
                                    <h4>ูุตุงุฆุญ ุงูุชุฏุฑูุจ</h4>
                                    <ul>
                                        <li>ุญุงูุธ ุนูู ุชูุงุฒู ุจูู ุฃููุงุน ุงููุญุฏุงุช</li>
                                        <li>ุงุณุชุซูุฑ ูู ุงููุณุชุดูู ููุนูุงุฌ</li>
                                        <li>ุงุณุชุฎุฏู ุงูุฃูุงุฏูููุฉ ูุชูููู ุงูุชูุงููู</li>
                                        <li>ุชูุงุนู ูุน ุงูุชุญุงููุงุช ูุฒูุงุฏุฉ ุงูููุฉ</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุงูููุญุฉ ุงูุฌุงูุจูุฉ ูููุนูููุงุช -->
            <div class="side-panel" id="side-panel">
                <div class="panel-header">
                    <h1 id="panel-title">ูุนูููุงุช ุงููุฏููุฉ</h1>
                    <button class="close-panel" id="close-panel">ร</button>
                </div>
                <div class="panel-content" id="panel-content">
                    <div class="city-stats">
                        <h3>ุฅุญุตุงุฆูุงุช ุงููุฏููุฉ</h3>
                        <div class="stat-item">
                            <span>ุฅุฌูุงูู ุงููุจุงูู:</span>
                            <span id="total-buildings">0</span>
                        </div>
                        <div class="stat-item">
                            <span>ุงูุณุนุฉ ุงูุณูุงููุฉ:</span>
                            <span id="total-capacity">0</span>
                        </div>
                        <div class="stat-item">
                            <span>ุงูุฅูุชุงุฌ ุงููููู:</span>
                            <div id="daily-production">
                                <div>ุฐูุจ: <span id="gold-production">0</span>/ููู</div>
                                <div>ุทุนุงู: <span id="food-production">0</span>/ููู</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="current-selection">
                        <h3>ุงููุจูู ุงููุญุฏุฏ</h3>
                        <p>ุงููุฑ ุนูู ุฃู ูุจูู ูุนุฑุถ ุชูุงุตููู ูุฎูุงุฑุงุชู.</p>
                    </div>
                </div>
                
                <div class="panel-footer">
                    <button class="btn btn-secondary" id="btn-rotate-camera">ุชุฏููุฑ ุงููุงููุฑุง</button>
                    <button class="btn btn-secondary" id="btn-reset-camera">ุฅุนุงุฏุฉ ุชุนููู</button>
                </div>
            </div>
            
            <!-- ูุณู ุญุฑุจ ุงูููุงูู -->
            <div class="content-section" id="warfare-section" style="display: none;">
                <div class="warfare-content">
                    <h2>ุญุฑุจ ุงูููุงูู</h2>
                    
                    <!-- ุญุงูุฉ ุงูููููุฉ ูุงูุฌูุด -->
                    <div class="kingdom-status">
                        <div class="status-card">
                            <h3>ูุณุชูู ุงูููููุฉ</h3>
                            <div class="status-value" id="kingdom-level">1</div>
                        </div>
                        <div class="status-card">
                            <h3>ุญุฌู ุงูุฌูุด</h3>
                            <div class="status-value" id="army-size">0/100</div>
                        </div>
                        <div class="status-card">
                            <h3>ุงููุถุน</h3>
                            <div class="status-value" id="war-status">ุณูู</div>
                        </div>
                    </div>
                    
                    <!-- ุชุฌููุฏ ุงูุฌูุด -->
                    <div class="army-recruitment">
                        <h3>ุชุฌููุฏ ุงูุฌูุด</h3>
                        <div class="recruitment-options">
                            <button class="btn btn-primary" onclick="game.recruitArmy(10)">
                                ุชุฌููุฏ 10 ุฌูุฏู (100๐ฐ)
                            </button>
                            <button class="btn btn-primary" onclick="game.recruitArmy(50)">
                                ุชุฌููุฏ 50 ุฌูุฏู (500๐ฐ)
                            </button>
                            <button class="btn btn-primary" onclick="game.recruitArmy(100)">
                                ุชุฌููุฏ 100 ุฌูุฏู (1000๐ฐ)
                            </button>
                        </div>
                    </div>
                    
                    <!-- ุงูุฃุนุฏุงุก -->
                    <div class="enemies-section">
                        <h3>ุงูููุงูู ุงููุนุงุฏูุฉ</h3>
                        <div class="enemies-list" id="enemies-list">
                            <div class="enemy-card" data-enemy="0">
                                <h4>ููุงูู ุจูุฒูุทุฉ</h4>
                                <p>ุงูููุฉ: 50</p>
                                <p>ุงูููุงูุฃุฉ: 500 ุฐูุจ</p>
                                <button class="btn btn-danger" onclick="game.startKingdomWar(0)">ูุงุฌู</button>
                            </div>
                            <div class="enemy-card" data-enemy="1">
                                <h4>ููุงูู ูุตุฑ</h4>
                                <p>ุงูููุฉ: 75</p>
                                <p>ุงูููุงูุฃุฉ: 750 ุฐูุจ</p>
                                <button class="btn btn-danger" onclick="game.startKingdomWar(1)">ูุงุฌู</button>
                            </div>
                            <div class="enemy-card" data-enemy="2">
                                <h4>ููุงูู ุงููููุงู</h4>
                                <p>ุงูููุฉ: 100</p>
                                <p>ุงูููุงูุฃุฉ: 1000 ุฐูุจ</p>
                                <button class="btn btn-danger" onclick="game.startKingdomWar(2)">ูุงุฌู</button>
                            </div>
                            <div class="enemy-card" data-enemy="3">
                                <h4>ุงูุฅูุจุฑุงุทูุฑูุฉ ุงูุฌุฑูุงููุฉ</h4>
                                <p>ุงูููุฉ: 150</p>
                                <p>ุงูููุงูุฃุฉ: 1500 ุฐูุจ</p>
                                <button class="btn btn-danger" onclick="game.startKingdomWar(3)">ูุงุฌู</button>
                            </div>
                        </div>
                        
                        <!-- ุฒุฑ ุงููุฌูู -->
                        <div class="attack-section" id="attack-section" style="display: none;">
                            <h3>ุงููุฌูู</h3>
                            <p>ุงูุนุฏู ุงูุญุงูู: <span id="current-enemy">ูุง ููุฌุฏ</span></p>
                            <button class="btn btn-warning btn-large" onclick="game.executeKingdomAttack()">
                                ุดู ูุฌูู
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- ุดุฑูุท ุงูุชููู ุงูุณููู -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-section="city">
                <div class="nav-icon city-icon"></div>
                <span>ุงููุฏููุฉ</span>
            </button>
            <button class="nav-btn" data-section="map">
                <div class="nav-icon map-icon"></div>
                <span>ุงูุฎุฑูุทุฉ</span>
            </button>
            <button class="nav-btn" data-section="warfare">
                <div class="nav-icon warfare-icon"></div>
                <span>ุญุฑุจ ุงูููุงูู</span>
            </button>
            <button class="nav-btn" data-section="troops" id="military-btn">
                <div class="nav-icon troops-icon"></div>
                <span>ุงูููุงุช</span>
            </button>
            <button class="nav-btn" data-section="research" id="research-btn">
                <div class="nav-icon research-icon"></div>
                <span>ุงูุจุญุซ</span>
            </button>
            <button class="nav-btn" data-section="kingdoms" id="kingdoms-btn">
                <div class="nav-icon kingdoms-icon"></div>
                <span>ุงูููุงูู</span>
            </button>
            <button class="nav-btn" data-section="expansion" onclick="game.showExpansionSection()">
                <div class="nav-icon expansion-icon">๐บ๏ธ</div>
                <span>ุงูุชูุณุนุงุช</span>
            </button>
            <button class="nav-btn" data-section="pets" onclick="game.showPetSystem()">
                <div class="nav-icon pet-icon" id="pet-system-icon">๐พ</div>
                <span>ุงูุญููุงู</span>
            </button>
            <button class="nav-btn" data-section="security" onclick="game.showSecurityPanel()">
                <div class="nav-icon security-icon">๐ก๏ธ</div>
                <span>ุงูุฃูุงู</span>
            </button>
            <button class="nav-btn" data-section="alliances" id="alliances-btn">
                <div class="nav-icon alliance-icon"></div>
                <span>ุงูุชุญุงููุงุช</span>
            </button>
            <button class="nav-btn" data-section="owner" onclick="game.toggleOwnerMode()">
                <div class="nav-icon owner-icon"></div>
                <span>ุงููุงูู</span>
            </button>
            <button class="nav-btn" data-section="riches-war" onclick="game.showRichesWarSection()">
                <div class="nav-icon riches-war-icon">๐๏ธ</div>
                <span>ุญุฑุจ ุงูุซุฑูู</span>
            </button>
            <button class="nav-btn" data-section="territories" onclick="game.showAllianceTerritoriesSection()">
                <div class="nav-icon territories-icon">๐บ๏ธ</div>
                <span>ุฃุฑุงุถู ุงูุชุญุงูู</span>
            </button>
            <button class="nav-btn" data-section="chat" onclick="game.openAllianceChat()" id="chat-btn">
                <div class="nav-icon chat-icon">๐ฌ</div>
                <span>ุฏุฑุฏุดุฉ ุงูุชุญุงูู</span>
            </button>
            <button class="nav-btn" data-section="ai-system" onclick="game.showAISystemSection()">
                <div class="nav-icon ai-system-icon">๐ค</div>
                <span>ุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
            </button>
            <button class="nav-btn" data-section="radar" onclick="game.showRadarSection()">
                <div class="nav-icon radar-icon">๐ก</div>
                <span>ุงูุฑุงุฏุงุฑ</span>
            </button>
            <button class="nav-btn" data-section="kingdom-lands" onclick="game.showKingdomLands()">
                <div class="nav-icon lands-icon">๐</div>
                <span>ุฃุฑุงุถู ุงูููููุฉ</span>
            </button>
            <button class="nav-btn" data-section="city-gates" onclick="game.showCityGates()">
                <div class="nav-icon city-gates-icon">๐ฐ</div>
                <span>ูุฏุฎู ุงููุฏููุฉ</span>
            </button>
            <button class="nav-btn" data-section="military-guides" onclick="game.showMilitaryGuidesSection()">
                <div class="nav-icon military-guides-icon">๐</div>
                <span>ุฃุฏูุฉ ุนุณูุฑูุฉ</span>
            </button>
            <button class="nav-btn" data-section="account-management" onclick="window.accountManager.showAccountManagement()">
                <div class="nav-icon account-management-icon">๐ฅ</div>
                <span>ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช</span>
            </button>
            <button class="nav-btn" data-section="vip">
                <div class="nav-icon vip-nav-icon"></div>
                <span>VIP</span>
            </button>
        </nav>
    </div>

    <!-- ููุงูุฐ ููุจุซูุฉ ููุจูุงุก -->
    <div class="modal" id="build-modal" style="display: none;">
        <div class="modal-content">
            <h2>ุจูุงุก ูุจูู ุฌุฏูุฏ</h2>
            <div id="build-info"></div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancel-build">ุฅูุบุงุก</button>
                <button class="btn btn-primary" id="confirm-build">ุจูุงุก</button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ูุนูููุงุช ุงููุจูู -->
    <div class="modal" id="building-info-modal" style="display: none;">
        <div class="modal-content">
            <h2 id="building-modal-title">ูุนูููุงุช ุงููุจูู</h2>
            <div id="building-modal-content"></div>
            <div class="modal-actions" id="building-modal-actions">
                <button class="btn btn-secondary" id="close-building-modal">ุฅุบูุงู</button>
                <button class="btn btn-primary" id="upgrade-building">ุชุฑููุฉ</button>
            </div>
        </div>
    </div>

    <!-- ูุณู ุงูููุงุช -->
    <div class="content-section" id="troops-section" style="display: none;">
        <div class="troops-content">
            <h2>โ๏ธ ูุธุงู ุงูููุงุช</h2>
            <p>ุทูุฑ ููุงุชู ูู T1 ุฅูู T14 ููุชุญ ุงููุฏุฑุงุช ุงูุญุฑุจูุฉ ุงููุชูุฏูุฉ</p>
            
            <!-- ุนุฑุถ ูุณุชูู ุงูููุงุช ุงูุญุงูู -->
            <div id="troopDisplay"></div>
            
            <!-- ูุนูููุงุช ุชูุตูููุฉ ุนู ุงููุฏุฑุงุช -->
            <div class="troop-capabilities">
                <h3>ูุฏุฑุงุช ุงูููุงุช</h3>
                <div class="capability-grid">
                    <div class="capability-item">
                        <div class="capability-icon">โ๏ธ</div>
                        <h4>ุงููุฌูู</h4>
                        <p>ุฒูุงุฏุฉ ููุฉ ุงููุฌูู ูููุญุฏุงุช ุงูุนุณูุฑูุฉ</p>
                    </div>
                    <div class="capability-item">
                        <div class="capability-icon">๐ก๏ธ</div>
                        <h4>ุงูุฏูุงุน</h4>
                        <p>ุญูุงูุฉ ุฃูุถู ูู ุงููุฌูุงุช ุงููุนุงุฏูุฉ</p>
                    </div>
                    <div class="capability-item">
                        <div class="capability-icon">โค๏ธ</div>
                        <h4>ุงูุตุญุฉ</h4>
                        <p>ุฒูุงุฏุฉ ุตุญุฉ ุงููุญุฏุงุช ููุฏุฑุชูุง ุนูู ุงูุจูุงุก</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุณู ุงูููุงูู -->
    <div class="content-section" id="kingdoms-section" style="display: none;">
        <div class="kingdoms-content">
            <h2>๐ฐ ูุธุงู ุงูููุงูู</h2>
            <p>ุณุงูุฑ ุจูู ุงูููุงูู ูุงุณุชูุดู ุนูุงูู ุฌุฏูุฏุฉ</p>
            
            <!-- ุนุฑุถ ุงูููููุฉ ุงูุญุงููุฉ -->
            <div id="kingdomDisplay"></div>
            
            <!-- ูุนูููุงุช ุงูููุงูู -->
            <div class="kingdom-info">
                <h3>ูุนูููุงุช ุงูุชููู</h3>
                <div class="info-items">
                    <div class="info-item">
                        <span class="info-icon">๐</span>
                        <span>ูุชุทูุจ ุนูุฑ ุญุณุงุจ 3 ุฃูุงู ูููุตูู ููููุงูู</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">โญ</span>
                        <span>ูุชุทูุจ ูุณุชูู C8 ูููุตูู ููููุงูู</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">๐ฐ</span>
                        <span>ูููู 500-2100 ุฐูุจูุฉ ููุชููู</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ VIP -->
    <div class="modal" id="vip-modal" style="display: none;">
        <div class="modal-content">
            <h2>ุงุดุชุฑุงู VIP</h2>
            <div class="vip-packages">
                <div class="vip-package" data-level="1">
                    <h3>VIP ุดุงูู</h3>
                    <div class="benefits">
                        <p>โข 2500 ุฐูุจ</p>
                        <p>โข ุชุณุฑูุน 4x</p>
                        <p>โข ุฅููุงุก ุงูููุงู 5x</p>
                        <p>โข ุตูุงุญูุฉ 30 ููู</p>
                    </div>
                    <button class="btn btn-gold">ุงุดุชุฑู ุงูุขู</button>
                </div>
                <div class="vip-package" data-level="2">
                    <h3>VIP ูุงูู</h3>
                    <div class="benefits">
                        <p>โข 5000 ุฐูุจ</p>
                        <p>โข ุชุณุฑูุน 5x</p>
                        <p>โข ุฅููุงุก ุงูููุงู 10x</p>
                        <p>โข ุตูุงุญูุฉ 60 ููู</p>
                    </div>
                    <button class="btn btn-gold">ุงุดุชุฑู ุงูุขู</button>
                </div>
                <div class="vip-package" data-level="3">
                    <h3>VIP ูุงุณู</h3>
                    <div class="benefits">
                        <p>โข 10000 ุฐูุจ</p>
                        <p>โข ุชุณุฑูุน ูุงูู</p>
                        <p>โข ุฅููุงุก ุงูููุงู 15x</p>
                        <p>โข ุตูุงุญูุฉ 90 ููู</p>
                    </div>
                    <button class="btn btn-gold">ุงุดุชุฑู ุงูุขู</button>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="close-vip">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- ูุธุงู ุงูุฅุฑุดุงุฏ ุงูุดุงูู -->
    <div class="guidance-overlay" id="guidance-overlay" style="display: none;">
        <div class="guidance-content">
            <div class="guidance-header">
                <h3 id="guidance-title">ุฏููู ุงูููุงูู</h3>
                <button class="guidance-close" id="close-guidance">โ</button>
            </div>
            
            <div class="guidance-body" id="guidance-body">
                <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
            </div>
            
            <div class="guidance-footer">
                <button class="btn btn-primary" id="guidance-understood">ูููุช</button>
            </div>
        </div>
    </div>

    <!-- ูุงุฌูุฉ ุฅุนุฏุงุฏุงุช ุงูุตูุช -->
    <div class="modal" id="audio-settings-modal" style="display: none;">
        <div class="modal-content audio-settings">
            <div class="settings-header">
                <h2>๐ต ุฅุนุฏุงุฏุงุช ุงูุตูุช ูุงูููุณููู</h2>
                <button class="close-modal" id="close-audio-settings">โ</button>
            </div>
            
            <div class="settings-body">
                <!-- ุงูุชุญูู ูู ุงูุตูุช ุงูุนุงู -->
                <div class="settings-section">
                    <h3>๐ ุงูุชุญูู ูู ุงูุตูุช</h3>
                    <div class="volume-control">
                        <label for="master-volume">
                            <span>๐ ูุณุชูู ุงูุตูุช ุงูุนุงู</span>
                            <span id="master-volume-display">50%</span>
                        </label>
                        <input type="range" id="master-volume" min="0" max="100" value="50">
                    </div>
                </div>

                <!-- ููุณููู ุงูุฎูููุฉ -->
                <div class="settings-section">
                    <h3>๐ถ ููุณููู ุงูุฎูููุฉ</h3>
                    <div class="music-control">
                        <label class="toggle-switch">
                            <input type="checkbox" id="background-music-toggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">ุชุดุบูู ููุณููู ุงูุฎูููุฉ</span>
                        </label>
                    </div>
                    <div class="volume-control">
                        <label for="music-volume">
                            <span>๐ต ูุณุชูู ุงูููุณููู</span>
                            <span id="music-volume-display">30%</span>
                        </label>
                        <input type="range" id="music-volume" min="0" max="100" value="30">
                    </div>
                </div>

                <!-- ุฃุตูุงุช ุงูุชุฃุซูุฑุงุช -->
                <div class="settings-section">
                    <h3>๐ฏ ุฃุตูุงุช ุงูุชุฃุซูุฑุงุช</h3>
                    <div class="volume-control">
                        <label for="effects-volume">
                            <span>๐ ูุณุชูู ุงูุชุฃุซูุฑุงุช</span>
                            <span id="effects-volume-display">60%</span>
                        </label>
                        <input type="range" id="effects-volume" min="0" max="100" value="60">
                    </div>
                </div>

                <!-- ุงุฎุชุจุงุฑ ุงูุฃุตูุงุช -->
                <div class="settings-section">
                    <h3>๐งช ุงุฎุชุจุงุฑ ุงูุฃุตูุงุช</h3>
                    <div class="test-sounds">
                        <button class="test-sound-btn" data-sound="buildComplete">๐๏ธ ุจูุงุก</button>
                        <button class="test-sound-btn" data-sound="battleWin">โ๏ธ ููุฒ</button>
                        <button class="test-sound-btn" data-sound="click">๐ ููุฑุฉ</button>
                        <button class="test-sound-btn" data-sound="resourceGain">๐ฐ ุฐูุจ</button>
                    </div>
                </div>

                <!-- ูุชู ุงูุตูุช -->
                <div class="settings-section">
                    <h3>๐ ูุชู ุงูุตูุช</h3>
                    <div class="mute-control">
                        <label class="toggle-switch large">
                            <input type="checkbox" id="mute-toggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label" id="mute-label">๐ ุงูุตูุช ููุนู</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="settings-footer">
                <button class="btn btn-secondary" id="reset-audio-settings">ุฅุนุงุฏุฉ ุชุนููู</button>
                <button class="btn btn-primary" id="save-audio-settings">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
        </div>
    </div>

    <!-- ูุนูููุงุช ูุณุงุนุฏ ุงูุชุญูู -->
    <div class="help-overlay" id="help-overlay" style="display: none;">
        <div class="help-content">
            <h3>ุทุฑููุฉ ุงููุนุจ</h3>
            <div class="help-section">
                <h4>ุงูุชุญูู ุจุงููููุฑุง:</h4>
                <p>โข ุงุณุชุฎุฏู ุฃุฒุฑุงุฑ ุงูุชุญูู ุฃู ุงููุงูุณ ููุชููู</p>
                <p>โข ุงูุนุฌูุฉ ููุชูุจูุฑ ูุงูุชุตุบูุฑ</p>
                <p>โข ุงูุณุญุจ ูุชุญุฑูู ุงููุงููุฑุง</p>
            </div>
            <div class="help-section">
                <h4>ุงูุจูุงุก:</h4>
                <p>โข ุงููุฑ ุนูู ุฃู ูุจูู ูู ุงูููุญุฉ</p>
                <p>โข ุงุถุบุท ุนูู ูููุน ูุงุฑุบ ูู ุงููุฏููุฉ</p>
                <p>โข ุฃูุฏ ุงูุจูุงุก ุนูุฏ ุชููุฑ ุงูููุงุฑุฏ</p>
            </div>
            <div class="help-section">
                <h4>ุฅุฏุงุฑุฉ ุงููุจุงูู:</h4>
                <p>โข ุงููุฑ ุนูู ูุจูู ููุฌูุฏ ูุนุฑุถ ูุนูููุงุชู</p>
                <p>โข ุงุณุชุฎุฏู ุงูุชุฑููุฉ ูุฒูุงุฏุฉ ุงูุฅูุชุงุฌ</p>
                <p>โข ุฑุงูุจ ุงูุชูุฏู ูู ุงูููุญุฉ ุงูุฌุงูุจูุฉ</p>
            </div>
            <button class="btn btn-primary" id="close-help">ูููุช</button>
        </div>
    </div>

    <!-- ุชุญููู ููุชุจุงุช Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="scripts/3d-game.js"></script>
    
    <script>
        // ุชููู ุจูู ุงูุฃูุณุงู
        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-btn');
            const sections = {
                'city': document.getElementById('city-section'),
                'map': document.getElementById('map-section'), 
                'military': document.getElementById('military-section'),
                'warfare': document.getElementById('warfare-section'),
                'troops': document.getElementById('troops-section'),
                'research': document.getElementById('research-section'),
                'kingdoms': document.getElementById('kingdoms-section'),
                'alliances': document.getElementById('alliances-section'),
                'owner': document.getElementById('owner-section'),
                'riches-war': document.getElementById('riches-war-section'),
                'territories': document.getElementById('alliance-territories-section'),
                'kingdom-lands': document.getElementById('kingdom-lands-section'),
                'chat': document.getElementById('chat-section'),
                'vip': document.getElementById('vip-section')
            };

            navButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.dataset.section;
                    
                    // ุฅุฒุงูุฉ ุงููุฆุฉ ุงููุดุทุฉ ูู ุฌููุน ุงูุฃุฒุฑุงุฑ
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    // ุฅุถุงูุฉ ุงููุฆุฉ ุงููุดุทุฉ ููุฒุฑ ุงููุญุฏุฏ
                    this.classList.add('active');
                    
                    // ุฅุฎูุงุก ุฌููุน ุงูุฃูุณุงู
                    Object.values(sections).forEach(sec => {
                        if (sec) sec.style.display = 'none';
                    });
                    
                    // ุนุฑุถ ุงููุณู ุงููุญุฏุฏ
                    if (sections[section]) {
                        sections[section].style.display = 'block';
                    }
                });
            });
            
            // ุชุญุฏูุซ ุนุฑุถ ุญุฑุจ ุงูููุงูู ุนูุฏ ุชููุฑ ุงููุตุฑ ุงููููู
            function updateWarfareVisibility() {
                const warfareSection = document.getElementById('warfare-section');
                const attackSection = document.getElementById('attack-section');
                
                if (window.game && window.game.royalPalace) {
                    if (warfareSection) warfareSection.style.display = 'block';
                }
            }
            
            // ุชุญุฏูุซ ุฏูุฑู ููุงุฌูุฉ ุญุฑุจ ุงูููุงูู
            setInterval(updateWarfareVisibility, 1000);
        });
    </script>

    <!-- ูุณู ุญุฑุจ ุงูุซุฑูู -->
    <div class="content-section" id="riches-war-section" style="display: none;">
        <div class="riches-war-content">
            <h2>๐๏ธ ุญุฑุจ ุงูุซุฑูู</h2>
            <p>ุฃุฏุฎู ุญุฑุจ ุงูุซุฑูู ูุชุทููุฑ ุฃุณูุญุชู ุจูุชุฑุงุช ูุชุฏุฑุฌุฉ ูุน ูุณุชูู ุงูุจูุงุก</p>
            <div id="richesWarDisplay"></div>
        </div>
    </div>

    <!-- ูุณู ุฏุฑุฏุดุฉ ุงูุชุญุงูู (ุณูุธูุฑ ููุงูุฐุฉ ููุจุซูุฉ) -->
    <div class="content-section" id="chat-section" style="display: none;">
        <div class="chat-content">
            <h2>๐ฌ ุฏุฑุฏุดุฉ ุงูุชุญุงูู</h2>
            <p>ุฏุฑุฏ ูุน ุฃุนุถุงุก ุงูุชุญุงูู ูุชุจุงุฏู ุงูุงุณุชุฑุงุชูุฌูุงุช</p>
            <button class="btn btn-primary" onclick="game.openAllianceChat()">ูุชุญ ุงูุฏุฑุฏุดุฉ</button>
        </div>
    </div>

    <!-- ูุณู ุฃุฑุงุถู ุงูุชุญุงูู -->
    <div class="content-section" id="alliance-territories-section" style="display: none;">
        <div class="alliance-territories-content">
            <h2>๐บ๏ธ ุฃุฑุงุถู ุงูุชุญุงูู</h2>
            <p>ุจูู ููุฑ ุงูุชุญุงูู ูุงูุฃุนูุงู ูุชูุณูุน ุฃุฑุงุถู ุงูุชุญุงูู ูุงูุฏูุงุน ุนููุง</p>
            <div id="allianceTerritoriesDisplay"></div>
        </div>
    </div>

    <!-- ูุณู ุฃุฑุงุถู ุงูููููุฉ -->
    <div class="content-section" id="kingdom-lands-section" style="display: none;">
        <div class="kingdom-lands-content">
            <h2>๐ ุฃุฑุงุถู ุงูููููุฉ</h2>
            <p>ุงุณุชูุดู ูุทููุฑ ุฃุฑุงุถู ุงูููููุฉ - ุงูุชูุงู ูุงูุณุงุญุงุช ุงูุฎุถุฑุงุก ูุงูููุงู</p>
            
            <!-- ุญุงูุฉ ุงูุฃุฑุงุถู -->
            <div class="lands-status">
                <div class="status-grid">
                    <div class="status-card">
                        <div class="card-icon">โฐ๏ธ</div>
                        <h3>ุงูุชูุงู</h3>
                        <div class="card-value" id="hills-count">3</div>
                        <p>ุชููุฑ ููุงุฑุฏ ุฅุถุงููุฉ</p>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">๐ฑ</div>
                        <h3>ุงูุณุงุญุงุช ุงูุฎุถุฑุงุก</h3>
                        <div class="card-value" id="fields-count">5</div>
                        <p>ุฒูุงุฏุฉ ุฅูุชุงุฌ ุงูุทุนุงู</p>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">๐ง</div>
                        <h3>ุงูููุงู</h3>
                        <div class="card-value" id="water-count">2</div>
                        <p>ุชูููุฑ ุงูููุงู ูููุจุงูู</p>
                    </div>
                    <div class="status-card">
                        <div class="card-icon">๐๏ธ</div>
                        <h3>ุงูุฃุฑุงุถู ุงูุฎุงู</h3>
                        <div class="card-value" id="raw-land-count">8</div>
                        <p>ุฌุงูุฒุฉ ููุชุทููุฑ</p>
                    </div>
                </div>
            </div>

            <!-- ุงุณุชูุดุงู ูุชุทููุฑ ุงูุฃุฑุงุถู -->
            <div class="land-development-section">
                <h3>ุชุทููุฑ ุงูุฃุฑุงุถู</h3>
                <div class="development-grid">
                    <div class="development-card" data-land-type="hills">
                        <div class="development-icon">โฐ๏ธ</div>
                        <h4>ุชุทููุฑ ุงูุชูุงู</h4>
                        <p>ุชุญููู ุงูุชูุงู ุฅูู ููุงุฌู ุฃู ุญุตูู</p>
                        <div class="development-cost">ุงูุชูููุฉ: 2000๐ฐ 1000๐ชต</div>
                        <button class="btn btn-primary" onclick="game.developLand('hills')">ุชุทููุฑ</button>
                    </div>
                    
                    <div class="development-card" data-land-type="fields">
                        <div class="development-icon">๐ฑ</div>
                        <h4>ุชุทููุฑ ุงูุณุงุญุงุช</h4>
                        <p>ุชุญููู ุงูุณุงุญุงุช ุฅูู ูุฒุงุฑุน ูุชูุฏูุฉ</p>
                        <div class="development-cost">ุงูุชูููุฉ: 1500๐ฐ 800๐ชต</div>
                        <button class="btn btn-primary" onclick="game.developLand('fields')">ุชุทููุฑ</button>
                    </div>
                    
                    <div class="development-card" data-land-type="water">
                        <div class="development-icon">๐ง</div>
                        <h4>ุชุทููุฑ ุงูููุงู</h4>
                        <p>ุจูุงุก ุฃุญูุงุถ ูุงุฆูุฉ ุฃู ุขุจุงุฑ</p>
                        <div class="development-cost">ุงูุชูููุฉ: 1200๐ฐ 600๐ฟ</div>
                        <button class="btn btn-primary" onclick="game.developLand('water')">ุชุทููุฑ</button>
                    </div>
                    
                    <div class="development-card" data-land-type="forest">
                        <div class="development-icon">๐ฒ</div>
                        <h4>ุชุทููุฑ ุงูุบุงุจุงุช</h4>
                        <p>ุชุญููู ุงูุบุงุจุงุช ุฅูู ููุงุฌู ุฎุดุจ</p>
                        <div class="development-cost">ุงูุชูููุฉ: 1800๐ฐ 900๐ชต</div>
                        <button class="btn btn-primary" onclick="game.developLand('forest')">ุชุทููุฑ</button>
                    </div>
                </div>
            </div>

            <!-- ุฎุฑูุทุฉ ุงูุฃุฑุงุถู -->
            <div class="land-map-section">
                <h3>ุฎุฑูุทุฉ ุงูุฃุฑุงุถู</h3>
                <div class="land-map" id="kingdomLandMap">
                    <div class="map-grid">
                        <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                    </div>
                </div>
                <div class="map-controls">
                    <button class="btn btn-secondary" onclick="game.refreshLandMap()">ุชุญุฏูุซ ุงูุฎุฑูุทุฉ</button>
                    <button class="btn btn-info" onclick="game.showLandDetails()">ุชูุงุตูู ุงูุฃุฑุงุถู</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุฏุฎู ุงููุฏููุฉ ูุงูุฏูุงุนุงุช ุงูุฎุงุตุฉ -->
    <div id="city-gates-section" class="city-gates-section" style="display: none;">
        <div class="section-container">
            <div class="section-header">
                <h2>๐ฐ ูุฏุฎู ุงููุฏููุฉ ูุงูุฏูุงุนุงุช</h2>
                <p>ุงุฏุนู ูุฏุฎู ูุฏููุชู ุจุฏูุงุนุงุช ูุฎูุฉ ูุญุตุฑูุฉ</p>
            </div>

            <!-- ูุฏุฎู ุงููุฏููุฉ ุงููุฎู -->
            <div class="city-gate-display">
                <div class="gate-showcase">
                    <div class="golden-gate">
                        <div class="gate-frame">
                            <div class="gate-door left-door">
                                <div class="door-ornaments"></div>
                                <div class="door-handle"></div>
                            </div>
                            <div class="gate-door right-door">
                                <div class="door-ornaments"></div>
                                <div class="door-handle"></div>
                            </div>
                        </div>
                        <div class="gate-crown">
                            <div class="crown-spikes">
                                <div class="spike"></div>
                                <div class="spike"></div>
                                <div class="spike"></div>
                                <div class="spike"></div>
                                <div class="spike"></div>
                            </div>
                        </div>
                    </div>
                    <div class="gate-stats">
                        <div class="stat">
                            <span class="stat-label">ูุณุชูู ุงููุฏุฎู</span>
                            <span class="stat-value" id="city-gate-level">1</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">ููุฉ ุงูุญูุงูุฉ</span>
                            <span class="stat-value" id="city-gate-defense">100</span>
                        </div>
                    </div>
                </div>
                <div class="gate-controls">
                    <button class="btn btn-primary" onclick="game.upgradeCityGate()">
                        ุชุฑููุฉ ุงููุฏุฎู 
                        <span class="cost" id="gate-upgrade-cost">500 ุฐูุจ</span>
                    </button>
                </div>
            </div>

            <!-- ุงูุฏูุงุนุงุช ุงูุฎุงุตุฉ -->
            <div class="defense-grid">
                <!-- ููููุณู (ุนูุงููุฉ ุญุฌุฑูุฉ) -->
                <div class="defense-card colossi-card">
                    <div class="defense-header">
                        <div class="defense-icon">๐ฟ</div>
                        <div class="defense-title">
                            <h3>ููููุณู</h3>
                            <p>ุนูุงููุฉ ุญุฌุฑูุฉ ูููุฉ</p>
                        </div>
                        <div class="defense-level">ูุณุชูู 1</div>
                    </div>
                    <div class="defense-stats">
                        <div class="stat-row">
                            <span>ุงูููุฉ ุงูุฏูุงุนูุฉ</span>
                            <span>250</span>
                        </div>
                        <div class="stat-row">
                            <span>ูุนุฏู ุงูุถุฑุฑ</span>
                            <span>50/ุซุงููุฉ</span>
                        </div>
                        <div class="stat-row">
                            <span>ุงููุฏู</span>
                            <span>ูุชูุณุท</span>
                        </div>
                    </div>
                    <div class="defense-controls">
                        <div class="quantity-control">
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('colossi', -1)">-</button>
                            <input type="number" id="colossi-quantity" value="0" min="0" max="10" readonly>
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('colossi', 1)">+</button>
                        </div>
                        <button class="btn btn-build" onclick="game.buildDefense('colossi')">
                            ุจูุงุก - <span class="cost">300 ุฐูุจ</span>
                        </button>
                    </div>
                </div>

                <!-- ูุฎุงุฎ ูุงุฑูุฉ -->
                <div class="defense-card fire-trap-card">
                    <div class="defense-header">
                        <div class="defense-icon">๐ฅ</div>
                        <div class="defense-title">
                            <h3>ูุฎุงุฎ ูุงุฑูุฉ</h3>
                            <p>ูุฎุงุฎ ููุญุฑูุฉ</p>
                        </div>
                        <div class="defense-level">ูุณุชูู 1</div>
                    </div>
                    <div class="defense-stats">
                        <div class="stat-row">
                            <span>ุงูููุฉ ุงูุฏูุงุนูุฉ</span>
                            <span>120</span>
                        </div>
                        <div class="stat-row">
                            <span>ูุนุฏู ุงูุถุฑุฑ</span>
                            <span>80/ุซุงููุฉ</span>
                        </div>
                        <div class="stat-row">
                            <span>ุงููุฏู</span>
                            <span>ูุตูุฑ</span>
                        </div>
                    </div>
                    <div class="defense-controls">
                        <div class="quantity-control">
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('fire-trap', -1)">-</button>
                            <input type="number" id="fire-trap-quantity" value="0" min="0" max="15" readonly>
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('fire-trap', 1)">+</button>
                        </div>
                        <button class="btn btn-build" onclick="game.buildDefense('fire-trap')">
                            ุจูุงุก - <span class="cost">200 ุฐูุจ</span>
                        </button>
                    </div>
                </div>

                <!-- ุฃุจุฑุงุฌ ุฑูุงูุฉ ุขููุฉ -->
                <div class="defense-card auto-turret-card">
                    <div class="defense-header">
                        <div class="defense-icon">๐ฏ</div>
                        <div class="defense-title">
                            <h3>ุฃุจุฑุงุฌ ุฑูุงูุฉ ุขููุฉ</h3>
                            <p>ุฃุจุฑุงุฌ ุฐููุฉ</p>
                        </div>
                        <div class="defense-level">ูุณุชูู 1</div>
                    </div>
                    <div class="defense-stats">
                        <div class="stat-row">
                            <span>ุงูููุฉ ุงูุฏูุงุนูุฉ</span>
                            <span>180</span>
                        </div>
                        <div class="stat-row">
                            <span>ูุนุฏู ุงูุถุฑุฑ</span>
                            <span>60/ุซุงููุฉ</span>
                        </div>
                        <div class="stat-row">
                            <span>ุงููุฏู</span>
                            <span>ุทููู</span>
                        </div>
                    </div>
                    <div class="defense-controls">
                        <div class="quantity-control">
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('auto-turret', -1)">-</button>
                            <input type="number" id="auto-turret-quantity" value="0" min="0" max="8" readonly>
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('auto-turret', 1)">+</button>
                        </div>
                        <button class="btn btn-build" onclick="game.buildDefense('auto-turret')">
                            ุจูุงุก - <span class="cost">400 ุฐูุจ</span>
                        </button>
                    </div>
                </div>

                <!-- ุฃุญุฌุงุฑ ุฅููุงุฆูุฉ -->
                <div class="defense-card stone-thrower-card">
                    <div class="defense-header">
                        <div class="defense-icon">โก</div>
                        <div class="defense-title">
                            <h3>ุฃุญุฌุงุฑ ุฅููุงุฆูุฉ</h3>
                            <p>ูุฏูุนูุงุช ุณุญุฑูุฉ</p>
                        </div>
                        <div class="defense-level">ูุณุชูู 1</div>
                    </div>
                    <div class="defense-stats">
                        <div class="stat-row">
                            <span>ุงูููุฉ ุงูุฏูุงุนูุฉ</span>
                            <span>200</span>
                        </div>
                        <div class="stat-row">
                            <span>ูุนุฏู ุงูุถุฑุฑ</span>
                            <span>100/ุซุงููุฉ</span>
                        </div>
                        <div class="stat-row">
                            <span>ุงููุฏู</span>
                            <span>ูุงุฆู ุงูุทูู</span>
                        </div>
                    </div>
                    <div class="defense-controls">
                        <div class="quantity-control">
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('stone-thrower', -1)">-</button>
                            <input type="number" id="stone-thrower-quantity" value="0" min="0" max="5" readonly>
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('stone-thrower', 1)">+</button>
                        </div>
                        <button class="btn btn-build" onclick="game.buildDefense('stone-thrower')">
                            ุจูุงุก - <span class="cost">500 ุฐูุจ</span>
                        </button>
                    </div>
                </div>

                <!-- ุฌุฏุฑุงู ูุชุญุฑูุฉ -->
                <div class="defense-card moving-wall-card">
                    <div class="defense-header">
                        <div class="defense-icon">๐งฑ</div>
                        <div class="defense-title">
                            <h3>ุฌุฏุฑุงู ูุชุญุฑูุฉ</h3>
                            <p>ุญูุงุฌุฒ ุฐููุฉ</p>
                        </div>
                        <div class="defense-level">ูุณุชูู 1</div>
                    </div>
                    <div class="defense-stats">
                        <div class="stat-row">
                            <span>ุงูููุฉ ุงูุฏูุงุนูุฉ</span>
                            <span>150</span>
                        </div>
                        <div class="stat-row">
                            <span>ูุนุฏู ุงูุถุฑุฑ</span>
                            <span>0/ุซุงููุฉ</span>
                        </div>
                        <div class="stat-row">
                            <span>ุงููุฏู</span>
                            <span>ุญุงุฌุฒ</span>
                        </div>
                    </div>
                    <div class="defense-controls">
                        <div class="quantity-control">
                            <button class="qty-btn" onclick="game.changeDefenseQuantity('moving-wall', -1)">-</button>
                            <input type="number" id="moving-wall-quantity" value="0" min="0" max="20" readonly>
                            <button class="qty-btn" onclick="game.buildDefense('moving-wall')">
                                ุจูุงุก - <span class="cost">150 ุฐูุจ</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ุฅุญุตุงุฆูุงุช ุฏูุงุนูุฉ ุดุงููุฉ -->
            <div class="defense-summary">
                <h3>๐ ุฅุญุตุงุฆูุงุช ุงูุฏูุงุน ุงูุดุงููุฉ</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-value" id="total-defense-power">0</div>
                        <div class="summary-label">ุฅุฌูุงูู ุงูููุฉ ุงูุฏูุงุนูุฉ</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="defense-units-count">0</div>
                        <div class="summary-label">ุนุฏุฏ ุงููุญุฏุงุช ุงูุฏูุงุนูุฉ</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="defense-upgrade-cost">0</div>
                        <div class="summary-label">ุชูููุฉ ุชุฑููุฉ ููุฏูุงุน</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุชุณุฌูู ุงูุฏุฎูู ูุงูุชุณุฌูู -->
    <div id="auth-modal" class="auth-modal" style="display: none;">
        <div class="auth-container">
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="showAuthTab('login')">ุชุณุฌูู ุงูุฏุฎูู</button>
                <button class="tab-btn" onclick="showAuthTab('register')">ุฅูุดุงุก ุญุณุงุจ</button>
            </div>

            <!-- ุชุจููุจ ุชุณุฌูู ุงูุฏุฎูู -->
            <div id="login-tab" class="auth-tab-content">
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="login-username" required placeholder="ุฃุฏุฎู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ุงุณู ุงููุณุชุฎุฏู">
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="login-password" required placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                    </div>
                    <button type="submit" class="btn btn-primary auth-submit">ุชุณุฌูู ุงูุฏุฎูู</button>
                </form>

                <div class="social-login">
                    <div class="social-divider">
                        <span>ุฃู ุณุฌู ุฏุฎููู ุจุงุณุชุฎุฏุงู</span>
                    </div>
                    <div class="social-buttons">
                        <button class="social-btn google-btn" onclick="loginWithGoogle()">
                            <svg class="social-icon" viewBox="0 0 24 24">
                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            ุงูุฏุฎูู ูุน Google
                        </button>
                        <button class="social-btn facebook-btn" onclick="loginWithFacebook()">
                            <svg class="social-icon" viewBox="0 0 24 24">
                                <path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            ุงูุฏุฎูู ูุน Facebook
                        </button>
                        <button class="social-btn twitter-btn" onclick="loginWithTwitter()">
                            <svg class="social-icon" viewBox="0 0 24 24">
                                <path fill="#1DA1F2" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                            ุงูุฏุฎูู ูุน Twitter
                        </button>
                    </div>
                </div>
            </div>

            <!-- ุชุจููุจ ุฅูุดุงุก ุญุณุงุจ -->
            <div id="register-tab" class="auth-tab-content" style="display: none;">
                <form id="register-form" class="auth-form">
                    <div class="form-group">
                        <label>ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="register-username" required placeholder="ุงุฎุชุฑ ุงุณู ูุณุชุฎุฏู ูุฑูุฏ">
                    </div>
                    <div class="form-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="register-email" placeholder="ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)">
                    </div>
                    <div class="form-group">
                        <label>ูุซุงู ููุฅูููู:</label>
                        <input type="email" value="game.player@email.com" readonly>
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="register-password" required placeholder="ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ">
                    </div>
                    <div class="form-group">
                        <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="register-confirm" required placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ">
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="accept-terms" required>
                        <label for="accept-terms">ุฃูุงูู ุนูู <a href="#" onclick="showTerms()">ุงูุดุฑูุท ูุงูุฃุญูุงู</a></label>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="accept-newsletter" checked>
                        <label for="accept-newsletter">ุฃุฑูุฏ ุชููู ุขุฎุฑ ุงูุฃุฎุจุงุฑ ูุงูุชุญุฏูุซุงุช</label>
                    </div>
                    <button type="submit" class="btn btn-primary auth-submit">ุฅูุดุงุก ุงูุญุณุงุจ</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู -->
    <div id="email-verification-modal" class="auth-modal" style="display: none;">
        <div class="auth-container">
            <div class="verification-header">
                <h2>โ๏ธ ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</h2>
                <p>ุฃุฑุณููุง ูู ุฑุงุจุท ุงูุชุฃููุฏ ุนูู ุจุฑูุฏู ุงูุฅููุชุฑููู</p>
            </div>
            <div class="verification-form">
                <div class="form-group">
                    <label>ุฃุฏุฎู ุฑูุฒ ุงูุชุฃููุฏ</label>
                    <input type="text" id="verification-code" placeholder="ุฃุฏุฎู ุงูุฑูุฒ ูู 6 ุฃุฑูุงู" maxlength="6">
                </div>
                <button onclick="verifyEmailCode()" class="btn btn-primary auth-submit">ุชุฃููุฏ ุงูุญุณุงุจ</button>
                <button onclick="resendVerificationCode()" class="btn btn-secondary">ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑูุฒ</button>
                <p class="verification-info">
                    ูู ุชุชูู ุฑุณุงูุฉ ุงูุชุฃููุฏุ ุชุญูู ูู ูุฌูุฏ ุงูุฑุณุงุฆู ุงููุฒุนุฌุฉ ุฃู 
                    <a href="#" onclick="changeEmail()">ุบููุฑ ุนููุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ุฃุฒุฑุงุฑ ุงููุณุชุฎุฏู ุงููุชุตู -->
    <div id="user-menu" class="user-menu" style="display: none;">
        <div class="user-info">
            <div class="user-avatar" id="user-avatar"></div>
            <div class="user-details">
                <span class="user-name" id="user-name">ุงุณู ุงููุณุชุฎุฏู</span>
                <span class="user-level" id="user-level">ูุณุชูู C1</span>
            </div>
        </div>
        <div class="user-actions">
            <button onclick="openUserProfile()" class="user-action-btn">ุงูููู ุงูุดุฎุตู</button>
            <button onclick="openUserSettings()" class="user-action-btn">ุงูุฅุนุฏุงุฏุงุช</button>
            <button onclick="showFarmStatus()" class="user-action-btn farm-status-btn" title="ุนุฑุถ ุญุงูุฉ ุงููุฒุงุฑุน">๐พ ุงููุฒุงุฑุน</button>
            <button onclick="openFancyNameEditor()" class="user-action-btn fancy-name-btn" title="ุฅูุดุงุก ุงุณู ูุฒุฎุฑู">โจ ุงุณู ูุฒุฎุฑู</button>
            <button onclick="logout()" class="user-action-btn logout-btn">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
        </div>
    </div>

    <!-- ุนุฑุถ ุญุงูุฉ ุงููุฒุงุฑุน -->
    <div class="farm-status-display" id="farm-status-display">
        <div class="farm-status-header">
            <h4>๐พ ุญุงูุฉ ุงููุฒุงุฑุน</h4>
            <button onclick="this.parentElement.parentElement.style.display='none'">โ</button>
        </div>
        <div class="farm-status-content">
            <div class="farm-status-item">
                <span class="label">ุงูุฅุฌูุงูู:</span>
                <span class="value"><span class="icon">๐พ</span><span id="farm-total-count">0</span></span>
            </div>
            <div class="farm-status-item">
                <span class="label">ุงููุดุทุฉ:</span>
                <span class="value"><span class="icon">๐ฑ</span><span id="farm-active-count">0</span></span>
            </div>
            <div class="farm-status-item">
                <span class="label">ุฌุงูุฒุฉ ููุญุตุงุฏ:</span>
                <span class="value"><span class="icon">๐</span><span id="farm-ready-count">0</span></span>
            </div>
            <div class="farm-status-item">
                <span class="label">ููุฏ ุงูุจูุงุก:</span>
                <span class="value"><span class="icon">๐๏ธ</span><span id="farm-building-count">0</span></span>
            </div>
            <div class="farm-status-item">
                <span class="label">ุชุญุชุงุฌ ุนูุงูุฉ:</span>
                <span class="value"><span class="icon">โ๏ธ</span><span id="farm-attention-count">0</span></span>
            </div>
        </div>
        <div class="farm-status-actions">
            <button onclick="testFarmNotifications()" class="btn btn-sm btn-secondary">ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช</button>
            <button onclick="addManualFarm('ูุฒุฑุนุฉ ุชุฌุฑูุจูุฉ')" class="btn btn-sm btn-primary">ุฅุถุงูุฉ ูุฒุฑุนุฉ</button>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุงูููู ุงูุดุฎุตู -->
    <div id="user-profile-modal" class="auth-modal" style="display: none;">
        <div class="auth-container">
            <div class="profile-header">
                <div class="profile-avatar" id="profile-avatar"></div>
                <h2 id="profile-name">ุงุณู ุงููุณุชุฎุฏู</h2>
                <p id="profile-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</p>
                <span class="profile-level" id="profile-level">ูุณุชูู C1</span>
            </div>
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-label">ุชุงุฑูุฎ ุงูุงูุถูุงู</span>
                    <span class="stat-value" id="join-date">ุบูุฑ ูุญุฏุฏ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ุขุฎุฑ ุชุณุฌูู ุฏุฎูู</span>
                    <span class="stat-value" id="last-login">ุบูุฑ ูุญุฏุฏ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">ุญุงูุฉ ุงูุชุฃููุฏ</span>
                    <span class="stat-value" id="verification-status">ุบูุฑ ูุคูุฏ</span>
                </div>
            </div>
            <div class="profile-actions">
                <button onclick="changePassword()" class="btn btn-primary">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</button>
                <button onclick="closeUserProfile()" class="btn btn-secondary">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ -->
    <div id="change-password-modal" class="auth-modal" style="display: none;">
        <div class="auth-container">
            <h2>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h2>
            <form id="change-password-form">
                <div class="form-group">
                    <label>ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</label>
                    <input type="password" id="current-password" required>
                </div>
                <div class="form-group">
                    <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                    <input type="password" id="new-password" required>
                </div>
                <div class="form-group">
                    <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                    <input type="password" id="new-password-confirm" required>
                </div>
                <button type="submit" class="btn btn-primary">ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ</button>
                <button type="button" onclick="closeChangePassword()" class="btn btn-secondary">ุฅูุบุงุก</button>
            </form>
        </div>
    </div>

    <!-- ุฃุฒุฑุงุฑ ุชุณุฌูู ุงูุฏุฎูู ูู ุดุฑูุท ุงูุชููู -->
    <div id="login-buttons" class="login-buttons">
        <button onclick="showAuthModal()" class="btn btn-primary">ุชุณุฌูู ุงูุฏุฎูู</button>
        <button onclick="showAuthModal('register')" class="btn btn-secondary">ุฅูุดุงุก ุญุณุงุจ</button>
    </div>

    <!-- ูุณู ูุธุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู -->
    <div class="content-section" id="ai-system-section" style="display: none;">
        <div class="ai-system-content">
            <h2>๐ค ูุธุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</h2>
            <p>ูุธุงู ุฐูู ููุณุงุนุฏุชู ูู ุชูุธูู ุงูููุงุช ูุชุฑุชูุจ ุตููู ุงููุชุงู ููุฑุงุกุฉ ุชูุงุฑูุฑ ุงููุนุฑูุฉ</p>
            <div id="aiSystemDisplay"></div>
        </div>
    </div>

    <!-- ูุณู ูุธุงู ุงูุฑุงุฏุงุฑ -->
    <div class="content-section" id="radar-section" style="display: none;">
        <div class="radar-content">
            <h2>๐ก ุงูุฑุงุฏุงุฑ ุงููุชุทูุฑ</h2>
            <p>ูุธุงู ูุฑุงูุจุฉ ูุชูุฏู ูุน ุฅุดุนุงุฑุงุช ููููุฉ ููุฅูุฐุงุฑุงุช ูุงููุฎุงุทุฑ</p>
            <div id="radar-container"></div>
        </div>
    </div>

    <!-- ูุณู ุงูุฃุฏูุฉ ุงูุนุณูุฑูุฉ -->
    <div class="content-section" id="military-guides-section" style="display: none;">
        <div class="military-guides-content">
            <h2>๐ ุงูุฃุฏูุฉ ุงูุนุณูุฑูุฉ ุงูุงุณุชุฑุงุชูุฌูุฉ</h2>
            <p>ุฏููู ุดุงูู ูุชูุธูู ุงูููุงุช ูุงูุทุจูุงุช ุงูุฏุงุฎููุฉ - ูุฌุงูู ุชูุงูุงู ูุฌููุน ุงููุงุนุจูู!</p>
            <div id="militaryGuidesDisplay"></div>
        </div>
    </div>

                                <h5>๐ฐ ุงูุทุจูุฉ ุงูุถุนููุฉ (40%) - 400 ุฌูุฏู</h5>
                                <ul>
                                    <li><strong>ุฌููุฏ ุงูุจูุงุฏู:</strong> 200-300 ุฌูุฏู</li>
                                    <li><strong>ุงูุงุญุชูุงุท:</strong> 40-60 ุฌูุฏู</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุชุตุงุต ุงูุฃุถุฑุงุฑ ุงูุฃููู</li>
                                    <li><strong>ูุนุฏู ุงูุฎุณุงุฆุฑ ุงูููุจูู:</strong> 25-35%</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>โก ุงูุทุจูุฉ ุงููุชูุณุทุฉ (35%) - 350 ุฌูุฏู</h5>
                                <ul>
                                    <li><strong>ูุดุงุฉ ุงููุชุงู:</strong> 120-150 ุฌูุฏู</li>
                                    <li><strong>ุงูุฏุนู:</strong> 80-100 ุฌูุฏู</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุฏุนู ุงูุฎุทูุท ุงูุฃูุงููุฉ</li>
                                    <li><strong>ูุนุฏู ุงูุฎุณุงุฆุฑ ุงูููุจูู:</strong> 15-20%</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ก๏ธ ุงูุทุจูุฉ ุงููููุฉ (15%) - 150 ุฌูุฏู</h5>
                                <ul>
                                    <li><strong>ุงููุฎุชุงุฑูู:</strong> 50-80 ุฌูุฏู</li>
                                    <li><strong>ุงููุชุฎุตุตูู:</strong> 30-50 ุฌูุฏู</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงููุชุงู ุงููุฑูุฒ</li>
                                    <li><strong>ูุนุฏู ุงูุฎุณุงุฆุฑ ุงูููุจูู:</strong> 8-12%</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ ุทุจูุฉ ุงููุฎุจุฉ (10%) - 100 ุฌูุฏู</h5>
                                <ul>
                                    <li><strong>ุญุฑุงุณ ุงูููุงุฏุฉ:</strong> 20-30 ุฌูุฏู</li>
                                    <li><strong>ุงูููุงุช ุงูุฎุงุตุฉ:</strong> 30-50 ุฌูุฏู</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุญูุงูุฉ ุงููุงููุฉ ููููุงุฏุฉ</li>
                                    <li><strong>ูุนุฏู ุงูุฎุณุงุฆุฑ ุงูููุจูู:</strong> 2-5%</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ุฏููู ุงููุฏุฑุนุงุช -->
                <div id="guide-armored" class="guide-tab-content">
                    <h3>๐๏ธ ุฏููู ุงูููุงุช ุงููุฏุฑุนุฉ</h3>
                    <div class="armored-details">
                        <h4>ุงูุชูุฒูุน ุงูุฃูุซู ูููุฏุฑุนุงุช (200 ูุฑูุจุฉ)</h4>
                        <div class="layer-breakdown">
                            <div class="layer-info">
                                <h5>๐ฐ ุงูุทุจูุฉ ุงูุถุนููุฉ (45%) - 90 ูุฑูุจุฉ</h5>
                                <ul>
                                    <li><strong>ุฏุจุงุจุงุช ุฎูููุฉ:</strong> 50-60 ูุฑูุจุฉ</li>
                                    <li><strong>ุงูููู ุงููุฏุฑุน:</strong> 20-25 ูุฑูุจุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุตุฏ ุงููุฌูุงุช ุงูุฃููู</li>
                                    <li><strong>ุฎุณุงุฆุฑ ููุจููุฉ:</strong> 30-40%</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>โก ุงูุทุจูุฉ ุงููุชูุณุทุฉ (35%) - 70 ูุฑูุจุฉ</h5>
                                <ul>
                                    <li><strong>ุฏุจุงุจุงุช ูุชูุณุทุฉ:</strong> 35-40 ูุฑูุจุฉ</li>
                                    <li><strong>ุงููุฏูุนูุฉ ุงููุฏุฑุนุฉ:</strong> 20-25 ูุฑูุจุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุฏุนู ุงูุฑุฆูุณู</li>
                                    <li><strong>ุฎุณุงุฆุฑ ููุจููุฉ:</strong> 15-20%</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ก๏ธ ุงูุทุจูุฉ ุงููููุฉ (15%) - 30 ูุฑูุจุฉ</h5>
                                <ul>
                                    <li><strong>ุฏุจุงุจุงุช ุซูููุฉ:</strong> 15-18 ูุฑูุจุฉ</li>
                                    <li><strong>ุงูููุฏุณุฉ ุงูุนุณูุฑูุฉ:</strong> 8-10 ูุฑูุจุงุช</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุงุฎุชุฑุงู</li>
                                    <li><strong>ุฎุณุงุฆุฑ ููุจููุฉ:</strong> 8-12%</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ ุทุจูุฉ ุงููุฎุจุฉ (5%) - 10 ูุฑูุจุงุช</h5>
                                <ul>
                                    <li><strong>ุฏุจุงุจุงุช ุงููุงุฆุฏ:</strong> 3-4 ูุฑูุจุงุช</li>
                                    <li><strong>ุงููุดุงุฉ ุงูุฎุงุตุฉ:</strong> 4-5 ูุฑูุจุงุช</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุญูุงูุฉ ุงูููุงุฏุฉ</li>
                                    <li><strong>ุฎุณุงุฆุฑ ููุจููุฉ:</strong> 1-3%</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ุฏููู ุงูุทูุฑุงู -->
                <div id="guide-aviation" class="guide-tab-content">
                    <h3>โ๏ธ ุฏููู ุงูููุงุช ุงูุฌููุฉ</h3>
                    <div class="aviation-details">
                        <h4>ุงูุชูุฒูุน ุงูุฃูุซู ููุทูุฑุงู (150 ุทุงุฆุฑุฉ)</h4>
                        <div class="layer-breakdown">
                            <div class="layer-info">
                                <h5>๐ฐ ุงูุทุจูุฉ ุงูุถุนููุฉ (40%) - 60 ุทุงุฆุฑุฉ</h5>
                                <ul>
                                    <li><strong>ุงูููุงุชูุงุช ุงูุฎูููุฉ:</strong> 25-30 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ุงูุทุงุฆุฑุงุช ุงููุฑุงูุจุฉ:</strong> 15-20 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ุงูููู ุงูุฎููู:</strong> 10-15 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุงุณุชุทูุงุน ูุงูุฏุนู</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>โก ุงูุทุจูุฉ ุงููุชูุณุทุฉ (35%) - 52 ุทุงุฆุฑุฉ</h5>
                                <ul>
                                    <li><strong>ุงูููุงุชูุงุช ุงููุชูุณุทุฉ:</strong> 25-30 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ุงููุฏุงูุน ุงูุทุงุฑุฆุฉ:</strong> 15-18 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุณูุทุฑุฉ ุนูู ุงููุฌุงู ุงูุฌูู</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ก๏ธ ุงูุทุจูุฉ ุงููููุฉ (20%) - 30 ุทุงุฆุฑุฉ</h5>
                                <ul>
                                    <li><strong>ุงูููุงุชูุงุช ุงูุซูููุฉ:</strong> 15-18 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ูุงุฐูุงุช ุตุบูุฑุฉ:</strong> 10-12 ุทุงุฆุฑุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงููุฌูู ุงููุฑูุฒ</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ ุทุจูุฉ ุงููุฎุจุฉ (5%) - 8 ุทุงุฆุฑุงุช</h5>
                                <ul>
                                    <li><strong>ุทุงุฆุฑุงุช ุงูููุงุฏุฉ:</strong> 3-4 ุทุงุฆุฑุงุช</li>
                                    <li><strong>ุงููุชุงู ุงูุฎุงุตุฉ:</strong> 3-4 ุทุงุฆุฑุงุช</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุญูุงูุฉ ุงููุงุฏุฉ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ุฏููู ุงููุฏูุนูุฉ -->
                <div id="guide-artillery" class="guide-tab-content">
                    <h3>๐ฅ ุฏููู ุงููุฏูุนูุฉ</h3>
                    <div class="artillery-details">
                        <h4>ุงูุชูุฒูุน ุงูุฃูุซู ูููุฏูุนูุฉ (80 ูุทุนุฉ)</h4>
                        <div class="layer-breakdown">
                            <div class="layer-info">
                                <h5>๐ฐ ุงูุทุจูุฉ ุงูุถุนููุฉ (45%) - 36 ูุทุนุฉ</h5>
                                <ul>
                                    <li><strong>ุงููุฏุงูุน ุงูุฎูููุฉ:</strong> 18-20 ูุทุนุฉ</li>
                                    <li><strong>ุงููุงูู:</strong> 10-12 ูุทุนุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงููุงุฑ ุงููุซููุฉ ุงูุฃููู</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>โก ุงูุทุจูุฉ ุงููุชูุณุทุฉ (35%) - 28 ูุทุนุฉ</h5>
                                <ul>
                                    <li><strong>ุงููุฏูุนูุฉ ุงููุชูุณุทุฉ:</strong> 15-18 ูุทุนุฉ</li>
                                    <li><strong>ุตูุงุฑูุฎ ุฃุฑุถูุฉ:</strong> 8-10 ูุทุนุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุฏุนู ุงููุณุชูุฑ</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ก๏ธ ุงูุทุจูุฉ ุงููููุฉ (15%) - 12 ูุทุนุฉ</h5>
                                <ul>
                                    <li><strong>ุงููุฏุงูุน ุงูุซูููุฉ:</strong> 6-8 ูุทุน</li>
                                    <li><strong>ุงูุตูุงุฑูุฎ ุงููุชูุฏูุฉ:</strong> 4-6 ูุทุน</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุงูุถุฑุจุงุช ุงูุญุงุณูุฉ</li>
                                </ul>
                            </div>
                            <div class="layer-info">
                                <h5>๐ ุทุจูุฉ ุงููุฎุจุฉ (5%) - 4 ูุทุน</h5>
                                <ul>
                                    <li><strong>ูุฏุงูุน ุงูููุงุฏุฉ:</strong> 2 ูุทุนุฉ</li>
                                    <li><strong>ุงููุฏูุนูุฉ ุงูุฎุงุตุฉ:</strong> 2 ูุทุนุฉ</li>
                                    <li><strong>ุงููุธููุฉ:</strong> ุญูุงูุฉ ุงูุนูููุงุช</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ุญุณุงุจุงุช ุงูุทุจูุงุช -->
                <div id="guide-calculations" class="guide-tab-content">
                    <h3>๐งฎ ุญุงุณุจุฉ ุงูุชูุฒูุน ุงูุนุณูุฑู ุงูุฐูู</h3>
                    <div class="calculator-section">
                        <div class="calculator-input">
                            <h4>ุฃุฏุฎู ุญุฌู ุฌูุดู</h4>
                            <input type="number" id="army-size-input" placeholder="ูุซุงู: 1000" min="1" max="10000">
                            <button onclick="calculateArmyLayers()" class="btn btn-primary">ุญุณุงุจ ุงูุชูุฒูุน</button>
                        </div>
                        <div id="calculation-results" class="calculation-results">
                            <p class="instruction">ุฃุฏุฎู ุนุฏุฏ ุงูููุงุช ููุญุตูู ุนูู ุงูุชูุฒูุน ุงูุฃูุซู</p>
                        </div>
                        <div class="calculation-formula">
                            <h4>๐ ูุนุงุฏูุงุช ุงูุชูุฒูุน</h4>
                            <div class="formula-item">
                                <strong>ุงูุทุจูุฉ ุงูุถุนููุฉ:</strong> 40-45% ูู ุฅุฌูุงูู ุงูููุงุช
                            </div>
                            <div class="formula-item">
                                <strong>ุงูุทุจูุฉ ุงููุชูุณุทุฉ:</strong> 35% ูู ุฅุฌูุงูู ุงูููุงุช
                            </div>
                            <div class="formula-item">
                                <strong>ุงูุทุจูุฉ ุงููููุฉ:</strong> 15% ูู ุฅุฌูุงูู ุงูููุงุช
                            </div>
                            <div class="formula-item">
                                <strong>ุทุจูุฉ ุงููุฎุจุฉ:</strong> 10% ูู ุฅุฌูุงูู ุงูููุงุช
                            </div>
                            <div class="calculation-note">
                                <strong>๐ก ูุตูุญุฉ:</strong> ูุฐุง ุงูุชูุฒูุน ูุถูู ุญูุงูุฉ 70-80% ูู ุงูููุงุช ุนุงููุฉ ุงููููุฉ
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ุงููุชุนุฏุฏุฉ -->
    <div class="content-section" id="account-management-section" style="display: none;">
        <div class="account-management-content">
            <h2>๐ฅ ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช ุงููุชุนุฏุฏุฉ</h2>
            <p>ูุธุงู ูุชูุฏู ูุฅุฏุงุฑุฉ ุนุฏุฉ ุญุณุงุจุงุช ูู ุงููุฒุงุฑุน - ูุซุงูู ููุงุนุจูู ุงููุชูุฏููู!</p>
            
            <!-- ูุนูููุงุช ุงูุญุณุงุจ ุงูุญุงูู -->
            <div class="current-account-info">
                <h3>๐ ุงูุญุณุงุจ ุงูุญุงูู</h3>
                <div class="account-info-card">
                    <div class="account-stat">
                        <span class="stat-label">ุงุณู ุงูุญุณุงุจ:</span>
                        <span class="stat-value" id="current-account-name">ุบูุฑ ูุญุฏุฏ</span>
                    </div>
                    <div class="account-stat">
                        <span class="stat-label">ุงููุณุชูู:</span>
                        <span class="stat-value" id="current-account-level">1</span>
                    </div>
                    <div class="account-stat">
                        <span class="stat-label">ุขุฎุฑ ุฏุฎูู:</span>
                        <span class="stat-value" id="current-account-login">ุบูุฑ ูุญุฏุฏ</span>
                    </div>
                    <div class="account-stat">
                        <span class="stat-label">ุฅุฌูุงูู ุงูุฐูุจ:</span>
                        <span class="stat-value gold-text" id="current-account-gold">0</span>
                    </div>
                </div>
            </div>

            <!-- ูุงุฆูุฉ ุงูุญุณุงุจุงุช -->
            <div class="accounts-list">
                <h3>๐ ุงูุญุณุงุจุงุช ุงููุญููุธุฉ</h3>
                <div id="saved-accounts" class="accounts-grid">
                    <!-- ุณูุชู ููุคูุง ุจู JavaScript -->
                </div>
            </div>

            <!-- ุฃุฒุฑุงุฑ ุงูุฅุฏุงุฑุฉ -->
            <div class="account-actions">
                <h3>โ๏ธ ุฅุฌุฑุงุกุงุช ุงูุญุณุงุจ</h3>
                <div class="action-buttons">
                    <button onclick="createNewAccount()" class="btn btn-primary">
                        โ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
                    </button>
                    <button onclick="showAccountSwitcher()" class="btn btn-secondary">
                        ๐ ุงูุชุจุฏูู ุจูู ุงูุญุณุงุจุงุช
                    </button>
                    <button onclick="exportAccountsData()" class="btn btn-info">
                        ๐พ ุชุตุฏูุฑ ุงูุจูุงูุงุช
                    </button>
                    <button onclick="importAccountsData()" class="btn btn-success">
                        ๐ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
                    </button>
                </div>
            </div>

            <!-- ุฅุญุตุงุฆูุงุช ุงููุฒุฑุนุฉ -->
            <div class="farm-stats">
                <h3>๐ ุฅุญุตุงุฆูุงุช ุงููุฒุฑุนุฉ</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="total-accounts">0</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงูุญุณุงุจุงุช</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="total-farm-gold">0</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงูุฐูุจ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="total-farm-level">0</div>
                        <div class="stat-label">ูุชูุณุท ุงููุณุชูู</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="total-farm-exp">0</div>
                        <div class="stat-label">ุฅุฌูุงูู ุงูุฎุจุฑุฉ</div>
                    </div>
                </div>
            </div>

            <!-- ูุตุงุฆุญ ุงููุฒุฑุนุฉ -->
            <div class="farming-tips">
                <h3>๐ก ูุตุงุฆุญ ุฅุฏุงุฑุฉ ุงููุฒุงุฑุน</h3>
                <div class="tips-grid">
                    <div class="tip-card">
                        <h4>๐ฏ ุชูุธูู ุงูุญุณุงุจุงุช</h4>
                        <ul>
                            <li>ุงุณุชุฎุฏู ุฃุณูุงุก ูุงุถุญุฉ ููุญุณุงุจุงุช</li>
                            <li>ุณุฌู ูุณุชููุงุช ูู ุญุณุงุจ</li>
                            <li>ุชุงุจุน ุขุฎุฑ ูุดุงุท ููู ุญุณุงุจ</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <h4>โก ุชุญุณูู ุงูุฃุฏุงุก</h4>
                        <ul>
                            <li>ุงุนุท ุงูุฃููููุฉ ููุญุณุงุจุงุช ุนุงููุฉ ุงููุณุชูู</li>
                            <li>ูุงุฒู ุงูููุงุฑุฏ ุจูู ุงูุญุณุงุจุงุช</li>
                            <li>ุงุณุชุฎุฏู ุงูุชุจุฏูู ุงูุณุฑูุน</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <h4>๐ ุงูุฃูุงู</h4>
                        <ul>
                            <li>ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ</li>
                            <li>ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูุจูุงูุงุช</li>
                            <li>ูุง ุชุดุงุฑู ุจูุงูุงุช ุงูุญุณุงุจุงุช</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Translation and Chat System Scripts -->
    <script src="scripts/translation-system.js"></script>
    <script src="scripts/game-chat-system.js"></script>
    <script src="scripts/license-system.js"></script>
    <script src="scripts/auth-account-management.js"></script>
    <script src="scripts/in-game-chat.js"></script>
    
    <!-- Main Game Script -->
    <script src="scripts/3d-game.js"></script>

    <!-- ูุธุงู ุฅุฏุงุฑุฉ ุงูุณุฌูู -->
    <div class="prison-management-system" id="prison-management-system">
        <div class="prison-header">
            <h3>โ๏ธ ูุธุงู ุฅุฏุงุฑุฉ ุงูุณุฌูู</h3>
            <div class="prison-stats">
                <span class="prison-count" id="prison-count">0</span>
                <span class="prison-label">ุณุฌูู</span>
            </div>
        </div>
        
        <!-- ูุนูููุงุช ุงูุณุฌูู -->
        <div class="prison-info">
            <div class="prison-level-info">
                <span class="prison-level-label">ุงููุณุชูู:</span>
                <span class="prison-level" id="prison-level">1</span>
            </div>
            <div class="prison-capacity-info">
                <span class="prison-capacity-label">ุงูุณุนุฉ:</span>
                <span class="prison-capacity" id="prison-capacity">10</span>
            </div>
        </div>
        
        <div class="prison-controls">
            <button class="btn btn-prison" onclick="levelManagementSystem.checkAllPlayers()">
                ๐ ูุญุต ุงููุงุนุจูู
            </button>
            <button class="btn btn-prison" onclick="levelManagementSystem.startMonitoring()">
                โถ๏ธ ุจุฏุก ุงููุฑุงูุจุฉ
            </button>
            <button class="btn btn-prison" onclick="openPrisonList()">
                ๐ ูุงุฆูุฉ ุงูุณุฌูุงุก
            </button>
            <button class="btn btn-upgrade" onclick="showPrisonUpgradeModal()">
                ๐ฐ ุชุทููุฑ ุงูุณุฌูู
            </button>
        </div>
        
        <div class="prison-alerts" id="prison-alerts">
            <!-- ุชูุจููุงุช ุงูุณุฌูู -->
        </div>
    </div>

    <!-- ูุงูุฐุฉ ูุงุฆูุฉ ุงูุณุฌูุงุก -->
    <div class="prison-list-modal" id="prison-list-modal" style="display: none;">
        <div class="prison-list-content">
            <div class="prison-list-header">
                <h2>๐ ูุงุฆูุฉ ุงูุณุฌูุงุก</h2>
                <button class="close-btn" onclick="closePrisonList()">โ</button>
            </div>
            
            <div class="prison-filters">
                <button class="filter-btn active" onclick="filterPrisoners('ALL')">ุงููู</button>
                <button class="filter-btn" onclick="filterPrisoners('LEVEL_14_15')">ูุณุชูู 14-15</button>
                <button class="filter-btn" onclick="filterPrisoners('WEAK_LEADERS')">ูุงุฏุฉ ุถุนูุงุก</button>
            </div>
            
            <div class="prisoners-list" id="prisoners-list">
                <!-- ูุงุฆูุฉ ุงูุณุฌูุงุก -->
            </div>
        </div>
    </div>

    <!-- ูุงูุฐุฉ ุชุทููุฑ ุงูุณุฌูู -->
    <div class="prison-upgrade-modal" id="prison-upgrade-modal" style="display: none;">
        <div class="prison-upgrade-content">
            <div class="prison-upgrade-header">
                <h2>๐ฐ ุชุทููุฑ ุงูุณุฌูู</h2>
                <button class="close-btn" onclick="closePrisonUpgrade()">โ</button>
            </div>
            
            <div class="current-prison-info">
                <h3>ุงููุนูููุงุช ุงูุญุงููุฉ</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">ุงููุณุชูู:</span>
                        <span class="value" id="current-level">1</span>
                    </div>
                    <div class="info-item">
                        <span class="label">ุงูุณุนุฉ:</span>
                        <span class="value" id="current-capacity">10</span>
                    </div>
                    <div class="info-item">
                        <span class="label">ุงูุณุทูุฑ ุงูุญุงููุฉ:</span>
                        <span class="value" id="current-prisoners">0</span>
                    </div>
                </div>
            </div>
            
            <div class="upgrade-requirements" id="upgrade-requirements">
                <!-- ูุชุทูุจุงุช ุงูุชุทููุฑ -->
            </div>
            
            <div class="upgrade-actions">
                <button class="btn-upgrade-prison" id="upgrade-btn" onclick="upgradePrison()">
                    ุชุทููุฑ ุงูุณุฌูู
                </button>
            </div>
        </div>
    </div>

    <script>
    // ูุธุงุฆู ุฅุฏุงุฑุฉ ุงูุณุฌูู
    function openPrisonList() {
        const modal = document.getElementById('prison-list-modal');
        if (modal) {
            modal.style.display = 'flex';
            updatePrisonersList();
        }
    }
    
    function closePrisonList() {
        const modal = document.getElementById('prison-list-modal');
        if (modal) {
            modal.style.display = 'none';
        }
    }
    
    function filterPrisoners(type) {
        const buttons = document.querySelectorAll('.filter-btn');
        buttons.forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        updatePrisonersList(type);
    }
    
    function updatePrisonersList(filter = 'ALL') {
        const list = document.getElementById('prisoners-list');
        if (!list || !levelManagementSystem) return;
        
        let prisoners = [];
        
        if (filter === 'ALL') {
            prisoners = [...levelManagementSystem.prisoners, ...levelManagementSystem.weakLeaders];
        } else if (filter === 'LEVEL_14_15') {
            prisoners = levelManagementSystem.prisoners;
        } else if (filter === 'WEAK_LEADERS') {
            prisoners = levelManagementSystem.weakLeaders;
        }
        
        if (prisoners.length === 0) {
            list.innerHTML = '<div class="no-prisoners">ูุง ููุฌุฏ ุณุฌูุงุก</div>';
            return;
        }
        
        list.innerHTML = prisoners.map(prisoner => {
            const isAdvanced = prisoner.criteria && prisoner.criteria.aiBehaviorAnalysis !== undefined;
            const aiIcon = isAdvanced ? getAIIcon(prisoner.criteria.aiBehaviorAnalysis) : '๐';
            const powerLevel = isAdvanced ? (prisoner.criteria.powerLevel/1000).toFixed(0) + 'K' : 'N/A';
            const aiScore = isAdvanced ? (prisoner.criteria.aiBehaviorAnalysis * 100).toFixed(0) + '%' : 'N/A';
            
            return `
            <div class="prisoner-item ${prisoner.status || 'WEAK'} ${isAdvanced ? 'advanced-analysis' : ''}">
                <div class="prisoner-info">
                    <div class="prisoner-header">
                        <h4>${prisoner.playerName || prisoner.name}</h4>
                        <span class="prisoner-type">${prisoner.status === 'WEAK' ? 'ูุงุฆุฏ ุถุนูู' : 'ุณุฌูู'}</span>
                    </div>
                    <div class="prisoner-stats">
                        <div class="stat-item">
                            <span class="stat-label">ุงููุณุชูู:</span>
                            <span class="stat-value">${prisoner.level}</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ุงูููุฉ:</span>
                            <span class="stat-value">${powerLevel}</span>
                        </div>
                        ${isAdvanced ? `
                        <div class="stat-item">
                            <span class="stat-label">${aiIcon} ุชุญููู AI:</span>
                            <span class="stat-value ai-score">${aiScore}</span>
                        </div>
                        ` : ''}
                    </div>
                    <div class="prisoner-reasons">
                        <p class="reason-title">ุงูุณุจุจ: ${getPrisonerReason(prisoner)}</p>
                        ${isAdvanced ? `
                        <div class="advanced-categories">
                            <div class="category-badge mobile-strike">ููุจุงูู ุณุชุฑููุณ</div>
                            <div class="category-badge war-sultans">ุญุฑุจ ุงูุณูุงุทูู</div>
                            <div class="category-badge ai-system">${aiIcon} ุฐูุงุก ุงุตุทูุงุนู</div>
                        </div>
                        ` : ''}
                    </div>
                    <p class="prison-time">โฐ ${getPrisonTime(prisoner)}</p>
                </div>
                <div class="prisoner-actions">
                    <button class="btn-bargain" onclick="showBargain('${prisoner.playerId || prisoner.id}')">
                        ๐ฐ ููุงูุถุฉ
                    </button>
                    <button class="btn-release" onclick="releasePrisoner('${prisoner.playerId || prisoner.id}')">
                        ๐๏ธ ุฅุทูู ุณุฑุงุญ
                    </button>
                    ${isAdvanced ? `
                    <button class="btn-analysis" onclick="showAdvancedAnalysis('${prisoner.playerId || prisoner.id}')">
                        ๐ ุชุญููู ูุชูุฏู
                    </button>
                    ` : ''}
                </div>
            </div>
        `;
        }).join('');
    }

    function getAIIcon(score) {
        if (score >= 0.8) return '๐ง';
        if (score >= 0.6) return '๐ก';
        if (score >= 0.4) return '๐ค';
        return '๐ด';
    }

    function showAdvancedAnalysis(playerId) {
        const weakLeader = levelManagementSystem.weakLeaders.find(p => p.playerId === playerId);
        if (!weakLeader || !weakLeader.criteria.aiBehaviorAnalysis) return;
        
        levelManagementSystem.showAdvancedPrisonerCaptureModal(
            { name: weakLeader.playerName, level: weakLeader.level }, 
            weakLeader.criteria
        );
    }
    
    function getPrisonerReason(prisoner) {
        if (prisoner.reason) {
            if (prisoner.reason === 'PRISONER_LEVEL_14_15') return 'ูุณุชูู 14-15';
            if (prisoner.reason === 'WEAK_LEADER') return 'ูุงุฆุฏ ุถุนูู';
        }
        
        if (prisoner.criteria) {
            const reasons = [];
            if (prisoner.criteria.failedFarms > 2) reasons.push('ูุฒุงุฑุน ูุงุดูุฉ');
            if (prisoner.criteria.lowProductivity < 50) reasons.push('ููุฎูุถุฉ ุงูุฅูุชุงุฌูุฉ');
            if (prisoner.criteria.recentLosses > 3) reasons.push('ุฎุณุงุฆุฑ ุญุฏูุซุฉ');
            return reasons.length > 0 ? reasons.join(', ') : 'ูุงุฆุฏ ุถุนูู';
        }
        
        return 'ุณุจุจ ุบูุฑ ูุญุฏุฏ';
    }
    
    function releasePrisoner(playerId) {
        if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฅุทูุงู ุณุฑุงุญ ูุฐุง ุงูุณุฌููุ')) {
            // ุฅุฒุงูุฉ ูู ูุงุฆูุฉ ุงูุณุฌูุงุก
            levelManagementSystem.prisoners = levelManagementSystem.prisoners.filter(p => p.id !== playerId);
            levelManagementSystem.weakLeaders = levelManagementSystem.weakLeaders.filter(p => p.playerId !== playerId);
            
            // ุชุญุฏูุซ ุงููุงุฌูุฉ
            levelManagementSystem.updatePrisonCount();
            updatePrisonersList();
            
            // ุนุฑุถ ุฑุณุงูุฉ ุชุฃููุฏ
            if (game && game.showNotification) {
                game.showNotification('ุชู ุฅุทูุงู ุณุฑุงุญ ุงูุณุฌูู ุจูุฌุงุญ! ๐๏ธ', 'success');
            }
        }
    }
    
    // ูุธููุฉ ุงูููุงูุถุฉ
    function showBargain(playerId) {
        if (levelManagementSystem && levelManagementSystem.showBargainModal) {
            levelManagementSystem.showBargainModal(playerId);
        }
    }
    
    // ุญุณุงุจ ููุช ุงูุณุฌู
    function getPrisonTime(prisoner) {
        if (!prisoner.captureTime) return 'ููุช ุบูุฑ ูุญุฏุฏ';
        
        const now = Date.now();
        const timeInPrison = now - prisoner.captureTime;
        const days = Math.floor(timeInPrison / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeInPrison % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        
        if (days >= 3) {
            return `โ๏ธ ${days} ููู - ${hours} ุณุงุนุฉ (ููุชูู ุงูุตูุงุญูุฉ)`;
        } else {
            const remaining = 3 - days;
            return `๐ ${days} ููู - ${hours} ุณุงุนุฉ (ูุชุจูู ${remaining} ููู)`;
        }
    }
    
    // ==========================================
    // ูุธุงุฆู ุชุทููุฑ ุงูุณุฌูู
    // ==========================================
    
    // ุนุฑุถ ูุงูุฐุฉ ุชุทููุฑ ุงูุณุฌูู
    function showPrisonUpgradeModal() {
        if (!levelManagementSystem) return;
        
        const modal = document.getElementById('prison-upgrade-modal');
        if (!modal) return;
        
        // ุชุญุฏูุซ ุงููุนูููุงุช
        updatePrisonUpgradeInfo();
        
        modal.style.display = 'flex';
    }
    
    // ุฅุบูุงู ูุงูุฐุฉ ุชุทููุฑ ุงูุณุฌูู
    function closePrisonUpgrade() {
        const modal = document.getElementById('prison-upgrade-modal');
        if (modal) {
            modal.style.display = 'none';
        }
    }
    
    // ุชุญุฏูุซ ูุนูููุงุช ุชุทููุฑ ุงูุณุฌูู
    function updatePrisonUpgradeInfo() {
        if (!levelManagementSystem) return;
        
        const currentLevel = levelManagementSystem.getPrisonLevel();
        const currentCapacity = levelManagementSystem.getPrisonCapacity();
        const currentPrisoners = levelManagementSystem.prisoners.length + levelManagementSystem.weakLeaders.length;
        
        // ุชุญุฏูุซ ุงููุนูููุงุช ุงูุญุงููุฉ
        const levelEl = document.getElementById('current-level');
        const capacityEl = document.getElementById('current-capacity');
        const prisonersEl = document.getElementById('current-prisoners');
        
        if (levelEl) levelEl.textContent = currentLevel;
        if (capacityEl) capacityEl.textContent = currentCapacity;
        if (prisonersEl) prisonersEl.textContent = currentPrisoners;
        
        // ุชุญุฏูุซ ูุชุทูุจุงุช ุงูุชุทููุฑ
        const upgradeRequirements = document.getElementById('upgrade-requirements');
        const upgradeBtn = document.getElementById('upgrade-btn');
        
        if (currentLevel >= 5) {
            if (upgradeRequirements) {
                upgradeRequirements.innerHTML = `
                    <div class="max-level-message">
                        <h3>๐ ุงูุณุฌูู ูุตูุช ูุฃูุตู ูุณุชูู!</h3>
                        <p>ูุง ูููู ุชุทููุฑ ุงูุณุฌูู ุฃูุซุฑ ูู ุฐูู</p>
                    </div>
                `;
            }
            if (upgradeBtn) {
                upgradeBtn.style.display = 'none';
            }
            return;
        }
        
        const nextLevel = currentLevel + 1;
        const cost = levelManagementSystem.getUpgradeCost();
        const newCapacity = levelManagementSystem.prisonSystem.capacities[nextLevel];
        
        if (upgradeRequirements && cost) {
            const canUpgrade = levelManagementSystem.hasEnoughResourcesForUpgrade(cost);
            
            upgradeRequirements.innerHTML = `
                <h3>ูุชุทูุจุงุช ุงูุชุทููุฑ ูููุณุชูู ${nextLevel}</h3>
                <div class="cost-grid">
                    <div class="cost-item">
                        <span class="cost-label">๐ฏ ุงููุณุชูู ุงููุทููุจ:</span>
                        <span class="cost-value">${cost.level}</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">๐ช ุงูุฐูุจ:</span>
                        <span class="cost-value">${cost.gold.toLocaleString()}</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">๐ชต ุงูุฎุดุจ:</span>
                        <span class="cost-value">${cost.wood}</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">๐ชจ ุงูุญุฌุงุฑุฉ:</span>
                        <span class="cost-value">${cost.stone}</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">๐ ุงูุทุนุงู:</span>
                        <span class="cost-value">${cost.food}</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">๐ ุงูุณุนุฉ ุงูุฌุฏูุฏุฉ:</span>
                        <span class="cost-value">${newCapacity}</span>
                    </div>
                </div>
                <div class="upgrade-info">
                    ${canUpgrade ? 
                        '<p style="color: #28a745;">โ ูุฏูู ููุงุฑุฏ ูุงููุฉ ููุชุทููุฑ</p>' : 
                        '<p style="color: #dc3545;">โ ููุงุฑุฏู ุบูุฑ ูุงููุฉ</p>'
                    }
                </div>
            `;
        }
        
        if (upgradeBtn) {
            upgradeBtn.style.display = cost ? 'block' : 'none';
            upgradeBtn.disabled = cost ? !levelManagementSystem.hasEnoughResourcesForUpgrade(cost) : true;
            
            if (cost) {
                const canUpgrade = levelManagementSystem.hasEnoughResourcesForUpgrade(cost);
                upgradeBtn.textContent = canUpgrade ? `ุชุทููุฑ ุงูุณุฌูู (${cost.gold.toLocaleString()} ๐ช)` : 'ููุงุฑุฏ ุบูุฑ ูุงููุฉ';
            }
        }
    }
    
    // ุชุทููุฑ ุงูุณุฌูู
    function upgradePrison() {
        if (levelManagementSystem && levelManagementSystem.upgradePrison()) {
            closePrisonUpgrade();
            updatePrisonersList(); // ุชุญุฏูุซ ุงููุงุฆูุฉ
        }
    }
    </script>
</body>
</html>